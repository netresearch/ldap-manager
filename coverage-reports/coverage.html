
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>internal: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/netresearch/ldap-manager/internal/build.go (0.0%)</option>
				
				<option value="file1">github.com/netresearch/ldap-manager/internal/ldap_cache/cache.go (100.0%)</option>
				
				<option value="file2">github.com/netresearch/ldap-manager/internal/ldap_cache/manager.go (75.0%)</option>
				
				<option value="file3">github.com/netresearch/ldap-manager/internal/ldap_cache/metrics.go (44.1%)</option>
				
				<option value="file4">github.com/netresearch/ldap-manager/internal/ldap_cache/test_helpers.go (88.2%)</option>
				
				<option value="file5">github.com/netresearch/ldap-manager/internal/options/app.go (40.0%)</option>
				
				<option value="file6">github.com/netresearch/ldap-manager/internal/web/auth.go (47.8%)</option>
				
				<option value="file7">github.com/netresearch/ldap-manager/internal/web/computers.go (0.0%)</option>
				
				<option value="file8">github.com/netresearch/ldap-manager/internal/web/groups.go (0.0%)</option>
				
				<option value="file9">github.com/netresearch/ldap-manager/internal/web/health.go (0.0%)</option>
				
				<option value="file10">github.com/netresearch/ldap-manager/internal/web/middleware.go (18.2%)</option>
				
				<option value="file11">github.com/netresearch/ldap-manager/internal/web/server.go (0.0%)</option>
				
				<option value="file12">github.com/netresearch/ldap-manager/internal/web/templates/base_templ.go (0.0%)</option>
				
				<option value="file13">github.com/netresearch/ldap-manager/internal/web/templates/computer_templ.go (0.0%)</option>
				
				<option value="file14">github.com/netresearch/ldap-manager/internal/web/templates/errors_templ.go (0.0%)</option>
				
				<option value="file15">github.com/netresearch/ldap-manager/internal/web/templates/flash.go (100.0%)</option>
				
				<option value="file16">github.com/netresearch/ldap-manager/internal/web/templates/groups_templ.go (0.0%)</option>
				
				<option value="file17">github.com/netresearch/ldap-manager/internal/web/templates/icons_templ.go (0.0%)</option>
				
				<option value="file18">github.com/netresearch/ldap-manager/internal/web/templates/index_templ.go (0.0%)</option>
				
				<option value="file19">github.com/netresearch/ldap-manager/internal/web/templates/list_templ.go (0.0%)</option>
				
				<option value="file20">github.com/netresearch/ldap-manager/internal/web/templates/logged_in_templ.go (0.0%)</option>
				
				<option value="file21">github.com/netresearch/ldap-manager/internal/web/templates/login_templ.go (0.0%)</option>
				
				<option value="file22">github.com/netresearch/ldap-manager/internal/web/templates/users_templ.go (0.0%)</option>
				
				<option value="file23">github.com/netresearch/ldap-manager/internal/web/users.go (4.1%)</option>
				
				<option value="file24">github.com/netresearch/ldap-manager/main.go (0.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">no coverage</span>
				<span class="cov1">low coverage</span>
				<span class="cov2">*</span>
				<span class="cov3">*</span>
				<span class="cov4">*</span>
				<span class="cov5">*</span>
				<span class="cov6">*</span>
				<span class="cov7">*</span>
				<span class="cov8">*</span>
				<span class="cov9">*</span>
				<span class="cov10">high coverage</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">// Package internal provides build-time information and version management.
package internal

import "fmt"

// Version contains the application version string, set during build time.
var (
        Version        = "dev"
        CommitHash     = "n/a"
        BuildTimestamp = "n/a"
)

// FormatVersion returns a human-readable version string including build metadata.
// Returns "Development version" for dev builds, or formatted version with commit and timestamp.
func FormatVersion() string <span class="cov0" title="0">{
        if Version == "dev" </span><span class="cov0" title="0">{
                return "Development version"
        }</span>

        <span class="cov0" title="0">return fmt.Sprintf("%s (%s, built at %s)", Version, CommitHash, BuildTimestamp)</span>
}
</pre>
		
		<pre class="file" id="file1" style="display: none">// Package ldap_cache provides thread-safe generic caching for LDAP entities.
// Package name uses underscore for LDAP domain clarity (ldap_cache vs ldapcache).
// nolint:var-naming
package ldap_cache

import (
        "sync"
)

// cacheable defines the interface for objects that can be cached.
// All LDAP entities must provide their Distinguished Name for indexing.
type cacheable interface {
        DN() string
}

// Cache provides thread-safe storage for LDAP entities with concurrent read/write access.
// It uses RWMutex to allow multiple concurrent readers while ensuring exclusive write access.
// Includes optional metrics tracking for performance monitoring.
type Cache[T cacheable] struct {
        m       sync.RWMutex // Reader-writer mutex for concurrent access
        items   []T          // Slice storing all cached items
        metrics *Metrics     // Optional metrics collector for performance tracking
}

// NewCached creates a new empty cache for the specified LDAP entity type.
// The cache is initialized with zero capacity and will grow as needed.
func NewCached[T cacheable]() Cache[T] <span class="cov5" title="9">{
        return Cache[T]{
                items: make([]T, 0),
        }
}</span>

// NewCachedWithMetrics creates a new empty cache with metrics tracking enabled.
// Provides performance monitoring for cache hit rates and operation counts.
func NewCachedWithMetrics[T cacheable](metrics *Metrics) Cache[T] <span class="cov10" title="63">{
        return Cache[T]{
                items:   make([]T, 0),
                metrics: metrics,
        }
}</span>

// setAll replaces the entire cache contents with the provided items.
// This operation is atomic and thread-safe, used during cache refresh cycles.
func (c *Cache[T]) setAll(v []T) <span class="cov9" title="41">{
        c.m.Lock()
        defer c.m.Unlock()

        c.items = v
}</span>

// update applies a function to all cached items, allowing in-place modifications.
// The function receives a pointer to each item for direct modification.
// This is used for maintaining cache consistency during LDAP operations.
func (c *Cache[T]) update(fn func(*T)) <span class="cov6" title="10">{
        c.m.Lock()
        defer c.m.Unlock()

        for idx, item := range c.items </span><span class="cov7" title="20">{
                fn(&amp;item)
                c.items[idx] = item
        }</span>
}

// Get returns a copy of all cached items.
// This operation is read-locked to allow concurrent access from multiple readers.
func (c *Cache[T]) Get() []T <span class="cov8" title="26">{
        c.m.RLock()
        defer c.m.RUnlock()

        return c.items
}</span>

// Find searches the cache for the first item matching the provided predicate.
// Returns a pointer to the matching item and true if found, nil and false otherwise.
// The search is performed under a read lock for thread safety.
// Records cache hit/miss metrics if metrics tracking is enabled.
func (c *Cache[T]) Find(fn func(T) bool) (v *T, found bool) <span class="cov7" title="23">{
        c.m.RLock()
        defer c.m.RUnlock()

        for _, item := range c.items </span><span class="cov8" title="36">{
                if fn(item) </span><span class="cov6" title="12">{
                        if c.metrics != nil </span><span class="cov1" title="1">{
                                c.metrics.RecordCacheHit()
                        }</span>

                        <span class="cov6" title="12">return &amp;item, true</span>
                }
        }

        <span class="cov6" title="11">if c.metrics != nil </span><span class="cov5" title="7">{
                c.metrics.RecordCacheMiss()
        }</span>

        <span class="cov6" title="11">return nil, false</span>
}

// FindByDN searches the cache for an item with the specified Distinguished Name.
// This is a convenience method that uses Find() with a DN comparison predicate.
func (c *Cache[T]) FindByDN(dn string) (v *T, found bool) <span class="cov7" title="18">{
        return c.Find(func(v T) bool </span><span class="cov8" title="26">{
                return v.DN() == dn
        }</span>)
}

// Filter returns all cached items that match the provided predicate.
// Creates a new slice containing only the matching items.
// The operation is read-locked for concurrent safety.
func (c *Cache[T]) Filter(fn func(T) bool) (v []T) <span class="cov6" title="15">{
        c.m.RLock()
        defer c.m.RUnlock()

        for _, item := range c.items </span><span class="cov8" title="35">{
                if fn(item) </span><span class="cov5" title="8">{
                        v = append(v, item)
                }</span>
        }

        <span class="cov6" title="15">return v</span>
}

// Count returns the total number of cached items.
// This operation is read-locked to ensure consistent results during concurrent access.
func (c *Cache[T]) Count() int <span class="cov8" title="39">{
        c.m.RLock()
        defer c.m.RUnlock()

        return len(c.items)
}</span>
</pre>
		
		<pre class="file" id="file2" style="display: none">// Package ldap_cache provides efficient caching of LDAP directory data with automatic refresh capabilities.
// It maintains synchronized in-memory caches for users, groups, and computers with concurrent-safe operations.
//
// Package name uses underscore for LDAP domain clarity (ldap_cache vs ldapcache).
// nolint:var-naming
package ldap_cache

import (
        "time"

        ldap "github.com/netresearch/simple-ldap-go"
        "github.com/rs/zerolog/log"
)

// LDAPClient interface defines the LDAP operations needed by the cache manager.
// This allows for easier testing with mock implementations.
type LDAPClient interface {
        FindUsers() ([]ldap.User, error)
        FindGroups() ([]ldap.Group, error)
        FindComputers() ([]ldap.Computer, error)
        CheckPasswordForSAMAccountName(samAccountName, password string) (*ldap.User, error)
        WithCredentials(dn, password string) (*ldap.LDAP, error)
}

// Manager coordinates LDAP data caching with automatic background refresh.
// It maintains separate caches for users, groups, and computers with configurable refresh intervals.
// All operations are concurrent-safe and provide immediate access to cached data.
// Includes comprehensive metrics tracking for performance monitoring and observability.
// Supports cache warming for faster startup and configurable refresh strategies.
type Manager struct {
        stop chan struct{} // Channel for graceful shutdown signaling

        client          LDAPClient    // LDAP client for directory operations
        metrics         *Metrics      // Performance metrics and health monitoring
        refreshInterval time.Duration // Configurable refresh interval (default 30s)
        warmupComplete  bool          // Tracks if initial cache warming is complete

        Users     Cache[ldap.User]     // Cached user entries with metrics
        Groups    Cache[ldap.Group]    // Cached group entries with metrics
        Computers Cache[ldap.Computer] // Cached computer entries with metrics
}

// FullLDAPUser represents a user with populated group memberships.
// This provides a complete view of user data including all associated groups.
type FullLDAPUser struct {
        ldap.User
        Groups []ldap.Group // All groups this user belongs to
}

// FullLDAPGroup represents a group with populated member list.
// This provides a complete view of group data including all member users.
type FullLDAPGroup struct {
        ldap.Group
        Members []ldap.User // All users that belong to this group
}

// FullLDAPComputer represents a computer with populated group memberships.
// This provides a complete view of computer data including all associated groups.
type FullLDAPComputer struct {
        ldap.Computer
        Groups []ldap.Group // All groups this computer belongs to
}

// New creates a new LDAP cache manager with the provided LDAP client.
// The manager is initialized with empty caches for users, groups, and computers.
// Uses default 30-second refresh interval. Call NewWithConfig() for custom settings.
// Includes comprehensive metrics tracking for performance monitoring.
// Call Run() to start the background refresh goroutine.
func New(client LDAPClient) *Manager <span class="cov10" title="21">{
        return NewWithConfig(client, 30*time.Second)
}</span>

// NewWithConfig creates a new LDAP cache manager with configurable refresh interval.
// The manager is initialized with empty caches and custom refresh timing.
// Includes comprehensive metrics tracking for performance monitoring.
// Call Run() to start the background refresh goroutine.
func NewWithConfig(client LDAPClient, refreshInterval time.Duration) *Manager <span class="cov10" title="21">{
        metrics := NewMetrics()

        return &amp;Manager{
                stop:            make(chan struct{}),
                client:          client,
                metrics:         metrics,
                refreshInterval: refreshInterval,
                warmupComplete:  false,
                Users:           NewCachedWithMetrics[ldap.User](metrics),
                Groups:          NewCachedWithMetrics[ldap.Group](metrics),
                Computers:       NewCachedWithMetrics[ldap.Computer](metrics),
        }
}</span>

// Run starts the background cache refresh loop.
// It performs initial cache warming, then continues refreshing at the configured interval.
// This method blocks until Stop() is called. Should be run in a separate goroutine.
func (m *Manager) Run() <span class="cov1" title="1">{
        // Use configurable refresh interval
        t := time.NewTicker(m.refreshInterval)
        defer t.Stop()

        // Perform initial cache warming with logging
        log.Info().Msg("Starting LDAP cache warming...")
        m.WarmupCache()

        log.Info().Dur("interval", m.refreshInterval).Msg("LDAP cache warmed up, starting refresh loop")

        for </span><span class="cov1" title="1">{
                select </span>{
                case &lt;-m.stop:<span class="cov1" title="1">
                        log.Info().Msg("LDAP cache stopped")

                        return</span>
                case &lt;-t.C:<span class="cov0" title="0">
                        m.Refresh()</span>
                }
        }
}

// Stop gracefully shuts down the background refresh loop.
// It sends a signal to the Run() method to terminate the refresh cycle.
func (m *Manager) Stop() <span class="cov1" title="1">{
        m.stop &lt;- struct{}{}
}</span>

// WarmupCache performs initial cache population with enhanced logging and error handling.
// This ensures the cache is fully populated before serving requests.
// Sets warmupComplete flag to indicate readiness for normal operations.
func (m *Manager) WarmupCache() <span class="cov1" title="1">{
        log.Info().Msg("Starting cache warmup process...")
        startTime := time.Now()

        // Parallel cache warming for faster startup
        type warmupResult struct {
                name  string
                count int
                err   error
        }

        results := make(chan warmupResult, 3)

        // Warm up users cache
        go func() </span><span class="cov1" title="1">{
                if err := m.RefreshUsers(); err != nil </span><span class="cov0" title="0">{
                        results &lt;- warmupResult{"users", 0, err}
                }</span> else<span class="cov1" title="1"> {
                        results &lt;- warmupResult{"users", m.Users.Count(), nil}
                }</span>
        }()

        // Warm up groups cache
        <span class="cov1" title="1">go func() </span><span class="cov1" title="1">{
                if err := m.RefreshGroups(); err != nil </span><span class="cov0" title="0">{
                        results &lt;- warmupResult{"groups", 0, err}
                }</span> else<span class="cov1" title="1"> {
                        results &lt;- warmupResult{"groups", m.Groups.Count(), nil}
                }</span>
        }()

        // Warm up computers cache
        <span class="cov1" title="1">go func() </span><span class="cov1" title="1">{
                if err := m.RefreshComputers(); err != nil </span><span class="cov0" title="0">{
                        results &lt;- warmupResult{"computers", 0, err}
                }</span> else<span class="cov1" title="1"> {
                        results &lt;- warmupResult{"computers", m.Computers.Count(), nil}
                }</span>
        }()

        // Collect results
        <span class="cov1" title="1">totalEntities := 0
        hasErrors := false
        for i := 0; i &lt; 3; i++ </span><span class="cov4" title="3">{
                result := &lt;-results
                if result.err != nil </span><span class="cov0" title="0">{
                        log.Error().Err(result.err).Str("cache", result.name).Msg("Failed to warm up cache")
                        m.metrics.RecordRefreshError()
                        hasErrors = true
                }</span> else<span class="cov4" title="3"> {
                        log.Debug().Str("cache", result.name).Int("count", result.count).Msg("Cache warmed up successfully")
                        totalEntities += result.count
                }</span>
        }

        <span class="cov1" title="1">duration := time.Since(startTime)

        if !hasErrors </span><span class="cov1" title="1">{
                m.warmupComplete = true
                m.metrics.RecordRefreshComplete(startTime, m.Users.Count(), m.Groups.Count(), m.Computers.Count())
                log.Info().
                        Int("total_entities", totalEntities).
                        Dur("duration", duration).
                        Msg("Cache warmup completed successfully")
        }</span> else<span class="cov0" title="0"> {
                log.Warn().
                        Int("total_entities", totalEntities).
                        Dur("duration", duration).
                        Msg("Cache warmup completed with errors")
        }</span>
}

// IsWarmedUp returns true if the initial cache warming process has completed successfully.
// Used to determine if the cache is ready to serve requests optimally.
func (m *Manager) IsWarmedUp() bool <span class="cov0" title="0">{
        return m.warmupComplete
}</span>

// RefreshUsers fetches all users from LDAP and updates the user cache.
// Returns an error if the LDAP query fails, otherwise replaces the entire user cache.
func (m *Manager) RefreshUsers() error <span class="cov8" title="12">{
        users, err := m.client.FindUsers()
        if err != nil </span><span class="cov1" title="1">{
                return err
        }</span>

        <span class="cov8" title="11">m.Users.setAll(users)

        return nil</span>
}

// RefreshGroups fetches all groups from LDAP and updates the group cache.
// Returns an error if the LDAP query fails, otherwise replaces the entire group cache.
func (m *Manager) RefreshGroups() error <span class="cov8" title="11">{
        groups, err := m.client.FindGroups()
        if err != nil </span><span class="cov1" title="1">{
                return err
        }</span>

        <span class="cov7" title="10">m.Groups.setAll(groups)

        return nil</span>
}

// RefreshComputers fetches all computers from LDAP and updates the computer cache.
// Returns an error if the LDAP query fails, otherwise replaces the entire computer cache.
func (m *Manager) RefreshComputers() error <span class="cov6" title="7">{
        computers, err := m.client.FindComputers()
        if err != nil </span><span class="cov1" title="1">{
                return err
        }</span>

        <span class="cov6" title="6">m.Computers.setAll(computers)

        return nil</span>
}

// Refresh updates all caches (users, groups, computers) from LDAP.
// Individual failures are logged as errors but don't stop other cache updates.
// This method is called automatically by the background refresh loop.
// Records comprehensive metrics for monitoring and observability.
func (m *Manager) Refresh() <span class="cov1" title="1">{
        startTime := m.metrics.RecordRefreshStart()
        hasErrors := false

        if err := m.RefreshUsers(); err != nil </span><span class="cov0" title="0">{
                log.Error().Err(err).Msg("Failed to refresh users cache")
                m.metrics.RecordRefreshError()
                hasErrors = true
        }</span>

        <span class="cov1" title="1">if err := m.RefreshGroups(); err != nil </span><span class="cov0" title="0">{
                log.Error().Err(err).Msg("Failed to refresh groups cache")
                m.metrics.RecordRefreshError()
                hasErrors = true
        }</span>

        <span class="cov1" title="1">if err := m.RefreshComputers(); err != nil </span><span class="cov0" title="0">{
                log.Error().Err(err).Msg("Failed to refresh computers cache")
                m.metrics.RecordRefreshError()
                hasErrors = true
        }</span>

        // Record successful completion metrics
        <span class="cov1" title="1">if !hasErrors </span><span class="cov1" title="1">{
                m.metrics.RecordRefreshComplete(startTime,
                        m.Users.Count(), m.Groups.Count(), m.Computers.Count())
        }</span>

        <span class="cov1" title="1">log.Debug().Msgf("Refreshed LDAP cache with %d users, %d groups and %d computers",
                m.Users.Count(), m.Groups.Count(), m.Computers.Count())</span>
}

// FindUsers returns all cached users, optionally filtering out disabled users.
// When showDisabled is true, returns all users including disabled ones.
// When false, returns only enabled users. Uses efficient filtering on cached data.
func (m *Manager) FindUsers(showDisabled bool) []ldap.User <span class="cov4" title="3">{
        if !showDisabled </span><span class="cov1" title="1">{
                return m.Users.Filter(func(u ldap.User) bool </span><span class="cov3" title="2">{
                        return u.Enabled
                }</span>)
        }

        <span class="cov3" title="2">return m.Users.Get()</span>
}

// FindUserByDN finds a user by their Distinguished Name (DN) in the cache.
// Returns the user if found, or ErrUserNotFound if no matching user exists.
// This is an O(n) operation that searches the cached user data.
func (m *Manager) FindUserByDN(dn string) (*ldap.User, error) <span class="cov3" title="2">{
        user, found := m.Users.FindByDN(dn)
        if !found </span><span class="cov3" title="2">{
                return nil, ldap.ErrUserNotFound
        }</span>

        <span class="cov0" title="0">return user, nil</span>
}

// FindUserBySAMAccountName finds a user by their SAMAccountName in the cache.
// Returns the user if found, or ErrUserNotFound if no matching user exists.
// This is an O(n) operation that searches the cached user data.
func (m *Manager) FindUserBySAMAccountName(samAccountName string) (*ldap.User, error) <span class="cov3" title="2">{
        user, found := m.Users.Find(func(user ldap.User) bool </span><span class="cov5" title="4">{
                return user.SAMAccountName == samAccountName
        }</span>)
        <span class="cov3" title="2">if !found </span><span class="cov1" title="1">{
                return nil, ldap.ErrUserNotFound
        }</span>

        <span class="cov1" title="1">return user, nil</span>
}

// FindGroups returns all cached groups from the LDAP directory.
// Provides immediate access to group data without LDAP queries.
func (m *Manager) FindGroups() []ldap.Group <span class="cov3" title="2">{
        return m.Groups.Get()
}</span>

// FindGroupByDN finds a group by its Distinguished Name (DN) in the cache.
// Returns the group if found, or ErrGroupNotFound if no matching group exists.
// This is an O(n) operation that searches the cached group data.
func (m *Manager) FindGroupByDN(dn string) (*ldap.Group, error) <span class="cov4" title="3">{
        group, found := m.Groups.FindByDN(dn)

        if !found </span><span class="cov4" title="3">{
                return nil, ldap.ErrGroupNotFound
        }</span>

        <span class="cov0" title="0">return group, nil</span>
}

// FindComputers returns all cached computers, optionally filtering out disabled computers.
// When showDisabled is true, returns all computers including disabled ones.
// When false, returns only enabled computers. Uses efficient filtering on cached data.
func (m *Manager) FindComputers(showDisabled bool) []ldap.Computer <span class="cov4" title="3">{
        if !showDisabled </span><span class="cov1" title="1">{
                return m.Computers.Filter(func(c ldap.Computer) bool </span><span class="cov1" title="1">{
                        return c.Enabled
                }</span>)
        }

        <span class="cov3" title="2">return m.Computers.Get()</span>
}

// FindComputerByDN finds a computer by its Distinguished Name (DN) in the cache.
// Returns the computer if found, or ErrComputerNotFound if no matching computer exists.
// This is an O(n) operation that searches the cached computer data.
func (m *Manager) FindComputerByDN(dn string) (*ldap.Computer, error) <span class="cov1" title="1">{
        computer, found := m.Computers.FindByDN(dn)
        if !found </span><span class="cov1" title="1">{
                return nil, ldap.ErrComputerNotFound
        }</span>

        <span class="cov0" title="0">return computer, nil</span>
}

// PopulateGroupsForUser creates a FullLDAPUser with populated group memberships.
// Takes a user and resolves all group DNs to full group objects from the cache.
// Returns a complete user object with expanded group information.
func (m *Manager) PopulateGroupsForUser(user *ldap.User) *FullLDAPUser <span class="cov1" title="1">{
        full := &amp;FullLDAPUser{
                User:   *user,
                Groups: make([]ldap.Group, 0),
        }

        for _, groupDN := range user.Groups </span><span class="cov1" title="1">{
                group, err := m.FindGroupByDN(groupDN)
                if err == nil </span><span class="cov0" title="0">{
                        full.Groups = append(full.Groups, *group)
                }</span>
        }

        <span class="cov1" title="1">return full</span>
}

// PopulateUsersForGroup creates a FullLDAPGroup with populated member list.
// Takes a group and resolves all member DNs to full user objects from the cache.
// When showDisabled is false, filters out disabled users from membership.
// Returns a complete group object with expanded member information.
func (m *Manager) PopulateUsersForGroup(group *ldap.Group, showDisabled bool) *FullLDAPGroup <span class="cov1" title="1">{
        full := &amp;FullLDAPGroup{
                Group:   *group,
                Members: make([]ldap.User, 0),
        }

        for _, userDN := range group.Members </span><span class="cov1" title="1">{
                user, err := m.FindUserByDN(userDN)
                if err == nil </span><span class="cov0" title="0">{
                        if !showDisabled &amp;&amp; !user.Enabled </span><span class="cov0" title="0">{
                                continue</span>
                        }

                        <span class="cov0" title="0">full.Members = append(full.Members, *user)</span>
                }
        }

        <span class="cov1" title="1">return full</span>
}

// PopulateGroupsForComputer creates a FullLDAPComputer with populated group memberships.
// Takes a computer and resolves all group DNs to full group objects from the cache.
// Returns a complete computer object with expanded group information.
func (m *Manager) PopulateGroupsForComputer(computer *ldap.Computer) *FullLDAPComputer <span class="cov1" title="1">{
        full := &amp;FullLDAPComputer{
                Computer: *computer,
                Groups:   make([]ldap.Group, 0),
        }

        for _, groupDN := range computer.Groups </span><span class="cov1" title="1">{
                group, err := m.FindGroupByDN(groupDN)
                if err == nil </span><span class="cov0" title="0">{
                        full.Groups = append(full.Groups, *group)
                }</span>
        }

        <span class="cov1" title="1">return full</span>
}

// OnAddUserToGroup updates cache when a user is added to a group.
// Synchronizes both user and group cache entries to maintain consistency.
// Should be called after successful LDAP operations to keep cache current.
func (m *Manager) OnAddUserToGroup(userDN string, groupDN string) <span class="cov1" title="1">{
        m.Users.update(func(user *ldap.User) </span><span class="cov3" title="2">{
                if user.DN() != userDN </span><span class="cov3" title="2">{
                        return
                }</span>

                <span class="cov0" title="0">user.Groups = append(user.Groups, groupDN)</span>
        })

        <span class="cov1" title="1">m.Groups.update(func(group *ldap.Group) </span><span class="cov3" title="2">{
                if group.DN() != groupDN </span><span class="cov3" title="2">{
                        return
                }</span>

                <span class="cov0" title="0">group.Members = append(group.Members, userDN)</span>
        })
}

// OnRemoveUserFromGroup updates cache when a user is removed from a group.
// Synchronizes both user and group cache entries to maintain consistency.
// Should be called after successful LDAP operations to keep cache current.
func (m *Manager) OnRemoveUserFromGroup(userDN string, groupDN string) <span class="cov1" title="1">{
        m.Users.update(func(user *ldap.User) </span><span class="cov3" title="2">{
                if user.DN() != userDN </span><span class="cov3" title="2">{
                        return
                }</span>

                <span class="cov0" title="0">for idx, group := range user.Groups </span><span class="cov0" title="0">{
                        if group == groupDN </span><span class="cov0" title="0">{
                                user.Groups = append(user.Groups[:idx], user.Groups[idx+1:]...)
                        }</span>
                }
        })

        <span class="cov1" title="1">m.Groups.update(func(group *ldap.Group) </span><span class="cov3" title="2">{
                if group.DN() != groupDN </span><span class="cov3" title="2">{
                        return
                }</span>

                <span class="cov0" title="0">for idx, member := range group.Members </span><span class="cov0" title="0">{
                        if member == userDN </span><span class="cov0" title="0">{
                                group.Members = append(group.Members[:idx], group.Members[idx+1:]...)
                        }</span>
                }
        })
}

// GetMetrics returns the current cache metrics for monitoring and observability.
// Provides comprehensive statistics about cache performance, health, and operations.
func (m *Manager) GetMetrics() *Metrics <span class="cov0" title="0">{
        return m.metrics
}</span>

// GetHealthCheck returns a summary of cache health and performance metrics.
// Useful for health check endpoints and monitoring dashboards.
func (m *Manager) GetHealthCheck() SummaryStats <span class="cov0" title="0">{
        return m.metrics.GetSummaryStats()
}</span>

// IsHealthy returns true if the cache system is operating normally.
// Checks for recent successful refreshes and low error rates.
func (m *Manager) IsHealthy() bool <span class="cov0" title="0">{
        return m.metrics.GetHealthStatus() == HealthHealthy
}</span>
</pre>
		
		<pre class="file" id="file3" style="display: none">// Package ldap_cache provides metrics and observability for LDAP cache operations.
// Tracks cache performance, hit rates, refresh cycles, and health status.
// Package name uses underscore for LDAP domain clarity (ldap_cache vs ldapcache).
// nolint:var-naming
package ldap_cache

import (
        "sync"
        "sync/atomic"
        "time"
)

// Metrics tracks performance and operational statistics for the LDAP cache.
// All counters are thread-safe using atomic operations for high-performance updates.
type Metrics struct {
        // Cache performance metrics
        CacheHits   int64 // Total number of successful cache lookups
        CacheMisses int64 // Total number of failed cache lookups

        // Refresh cycle metrics
        RefreshCount    int64     // Total number of cache refresh operations
        LastRefresh     time.Time // Timestamp of the last successful refresh
        RefreshErrors   int64     // Total number of refresh failures
        RefreshDuration int64     // Duration of last refresh in nanoseconds

        // Entity-specific metrics
        UserCount     int64 // Current number of cached users
        GroupCount    int64 // Current number of cached groups
        ComputerCount int64 // Current number of cached computers

        // Operational metrics
        StartTime     time.Time // Cache manager startup time
        UptimeSeconds int64     // Total uptime in seconds
        HealthStatus  int32     // Health status: 0=healthy, 1=degraded, 2=unhealthy
        ErrorRate     float64   // Recent error rate percentage (0-100)

        // Internal state protection
        mu sync.RWMutex // Protects non-atomic fields during updates
}

// CacheHealth represents the overall health status of the cache system.
type CacheHealth int32

const (
        // HealthHealthy indicates all cache systems are operational.
        HealthHealthy CacheHealth = 0
        // HealthDegraded indicates some issues exist but the cache is still functional.
        HealthDegraded CacheHealth = 1
        // HealthUnhealthy indicates critical issues that affect cache functionality.
        HealthUnhealthy CacheHealth = 2
)

// NewMetrics creates a new metrics instance with initialized counters.
// Sets the start time to current time and all counters to zero.
func NewMetrics() *Metrics <span class="cov10" title="21">{
        return &amp;Metrics{
                StartTime:    time.Now(),
                HealthStatus: int32(HealthHealthy),
        }
}</span>

// RecordCacheHit increments the cache hit counter atomically.
// Used when a cache lookup successfully finds the requested item.
func (m *Metrics) RecordCacheHit() <span class="cov1" title="1">{
        atomic.AddInt64(&amp;m.CacheHits, 1)
}</span>

// RecordCacheMiss increments the cache miss counter atomically.
// Used when a cache lookup fails to find the requested item.
func (m *Metrics) RecordCacheMiss() <span class="cov6" title="7">{
        atomic.AddInt64(&amp;m.CacheMisses, 1)
}</span>

// RecordRefreshStart records the beginning of a cache refresh operation.
// Updates the refresh count and sets the start time for duration tracking.
func (m *Metrics) RecordRefreshStart() time.Time <span class="cov1" title="1">{
        atomic.AddInt64(&amp;m.RefreshCount, 1)

        return time.Now()
}</span>

// RecordRefreshComplete records the successful completion of a cache refresh.
// Updates the last refresh time, duration, and current entity counts.
func (m *Metrics) RecordRefreshComplete(startTime time.Time, userCount, groupCount, computerCount int) <span class="cov3" title="2">{
        duration := time.Since(startTime)

        m.mu.Lock()
        m.LastRefresh = time.Now()
        m.mu.Unlock()

        atomic.StoreInt64(&amp;m.RefreshDuration, duration.Nanoseconds())
        atomic.StoreInt64(&amp;m.UserCount, int64(userCount))
        atomic.StoreInt64(&amp;m.GroupCount, int64(groupCount))
        atomic.StoreInt64(&amp;m.ComputerCount, int64(computerCount))

        m.updateHealthStatus()
}</span>

// RecordRefreshError increments the refresh error counter.
// Used when a cache refresh operation fails due to LDAP errors.
func (m *Metrics) RecordRefreshError() <span class="cov0" title="0">{
        atomic.AddInt64(&amp;m.RefreshErrors, 1)
        m.updateHealthStatus()
}</span>

// updateHealthStatus calculates and updates the overall health status.
// Uses error rates and refresh success to determine system health.
func (m *Metrics) updateHealthStatus() <span class="cov3" title="2">{
        totalRefresh := atomic.LoadInt64(&amp;m.RefreshCount)
        if totalRefresh == 0 </span><span class="cov1" title="1">{
                return
        }</span>

        <span class="cov1" title="1">errorCount := atomic.LoadInt64(&amp;m.RefreshErrors)
        errorRate := float64(errorCount) / float64(totalRefresh) * 100

        m.mu.Lock()
        m.ErrorRate = errorRate
        m.mu.Unlock()

        var newStatus CacheHealth
        switch </span>{
        case errorRate == 0:<span class="cov1" title="1">
                newStatus = HealthHealthy</span>
        case errorRate &lt; 10:<span class="cov0" title="0">
                newStatus = HealthDegraded</span>
        default:<span class="cov0" title="0">
                newStatus = HealthUnhealthy</span>
        }

        <span class="cov1" title="1">atomic.StoreInt32(&amp;m.HealthStatus, int32(newStatus))</span>
}

// GetCacheHitRate calculates the cache hit percentage.
// Returns 0.0 if no cache operations have occurred yet.
func (m *Metrics) GetCacheHitRate() float64 <span class="cov0" title="0">{
        hits := atomic.LoadInt64(&amp;m.CacheHits)
        misses := atomic.LoadInt64(&amp;m.CacheMisses)
        total := hits + misses

        if total == 0 </span><span class="cov0" title="0">{
                return 0.0
        }</span>

        <span class="cov0" title="0">return float64(hits) / float64(total) * 100</span>
}

// GetUptime returns the total uptime duration since cache manager startup.
func (m *Metrics) GetUptime() time.Duration <span class="cov0" title="0">{
        m.mu.RLock()
        startTime := m.StartTime
        m.mu.RUnlock()

        return time.Since(startTime)
}</span>

// GetHealthStatus returns the current health status of the cache system.
func (m *Metrics) GetHealthStatus() CacheHealth <span class="cov0" title="0">{
        return CacheHealth(atomic.LoadInt32(&amp;m.HealthStatus))
}</span>

// GetLastRefreshDuration returns the duration of the most recent refresh operation.
func (m *Metrics) GetLastRefreshDuration() time.Duration <span class="cov0" title="0">{
        nanos := atomic.LoadInt64(&amp;m.RefreshDuration)

        return time.Duration(nanos)
}</span>

// GetEntityCounts returns the current count of cached entities.
func (m *Metrics) GetEntityCounts() (users, groups, computers int64) <span class="cov0" title="0">{
        return atomic.LoadInt64(&amp;m.UserCount),
                atomic.LoadInt64(&amp;m.GroupCount),
                atomic.LoadInt64(&amp;m.ComputerCount)
}</span>

// SummaryStats provides a comprehensive view of cache metrics and performance data.
// Used by monitoring dashboards and health check endpoints for system observability.
type SummaryStats struct {
        CacheHitRate    float64       `json:"cache_hit_rate"`
        TotalOperations int64         `json:"total_operations"`
        RefreshCount    int64         `json:"refresh_count"`
        RefreshErrors   int64         `json:"refresh_errors"`
        LastRefreshAge  time.Duration `json:"last_refresh_age"`
        RefreshDuration time.Duration `json:"refresh_duration"`
        Uptime          time.Duration `json:"uptime"`
        HealthStatus    string        `json:"health_status"`
        ErrorRate       float64       `json:"error_rate"`
        EntityCounts    EntityCounts  `json:"entity_counts"`
}

// EntityCounts represents the current count of each entity type.
type EntityCounts struct {
        Users     int64 `json:"users"`
        Groups    int64 `json:"groups"`
        Computers int64 `json:"computers"`
}

// GetSummaryStats returns comprehensive cache statistics for monitoring.
func (m *Metrics) GetSummaryStats() SummaryStats <span class="cov0" title="0">{
        users, groups, computers := m.GetEntityCounts()

        m.mu.RLock()
        lastRefresh := m.LastRefresh
        errorRate := m.ErrorRate
        m.mu.RUnlock()

        var lastRefreshAge time.Duration
        if !lastRefresh.IsZero() </span><span class="cov0" title="0">{
                lastRefreshAge = time.Since(lastRefresh)
        }</span>

        <span class="cov0" title="0">healthStatus := m.GetHealthStatus()
        var healthStr string
        switch healthStatus </span>{
        case HealthHealthy:<span class="cov0" title="0">
                healthStr = "healthy"</span>
        case HealthDegraded:<span class="cov0" title="0">
                healthStr = "degraded"</span>
        case HealthUnhealthy:<span class="cov0" title="0">
                healthStr = "unhealthy"</span>
        }

        <span class="cov0" title="0">return SummaryStats{
                CacheHitRate:    m.GetCacheHitRate(),
                TotalOperations: atomic.LoadInt64(&amp;m.CacheHits) + atomic.LoadInt64(&amp;m.CacheMisses),
                RefreshCount:    atomic.LoadInt64(&amp;m.RefreshCount),
                RefreshErrors:   atomic.LoadInt64(&amp;m.RefreshErrors),
                LastRefreshAge:  lastRefreshAge,
                RefreshDuration: m.GetLastRefreshDuration(),
                Uptime:          m.GetUptime(),
                HealthStatus:    healthStr,
                ErrorRate:       errorRate,
                EntityCounts: EntityCounts{
                        Users:     users,
                        Groups:    groups,
                        Computers: computers,
                },
        }</span>
}
</pre>
		
		<pre class="file" id="file4" style="display: none">// Package name uses underscore for LDAP domain clarity (ldap_cache vs ldapcache).
// nolint:var-naming
package ldap_cache

import (
        "errors"

        ldap "github.com/netresearch/simple-ldap-go"
)

// mockLDAPClient implements LDAPClient for testing
type mockLDAPClient struct {
        users     []ldap.User
        groups    []ldap.Group
        computers []ldap.Computer

        findUsersError     error
        findGroupsError    error
        findComputersError error

        callCounts struct {
                findUsers     int
                findGroups    int
                findComputers int
        }
}

func (m *mockLDAPClient) FindUsers() ([]ldap.User, error) <span class="cov8" title="12">{
        m.callCounts.findUsers++
        if m.findUsersError != nil </span><span class="cov1" title="1">{
                return nil, m.findUsersError
        }</span>

        <span class="cov7" title="11">return m.users, nil</span>
}

func (m *mockLDAPClient) FindGroups() ([]ldap.Group, error) <span class="cov7" title="11">{
        m.callCounts.findGroups++
        if m.findGroupsError != nil </span><span class="cov1" title="1">{
                return nil, m.findGroupsError
        }</span>

        <span class="cov7" title="10">return m.groups, nil</span>
}

func (m *mockLDAPClient) FindComputers() ([]ldap.Computer, error) <span class="cov6" title="7">{
        m.callCounts.findComputers++
        if m.findComputersError != nil </span><span class="cov1" title="1">{
                return nil, m.findComputersError
        }</span>

        <span class="cov6" title="6">return m.computers, nil</span>
}

func (m *mockLDAPClient) CheckPasswordForSAMAccountName(_, _ string) (*ldap.User, error) <span class="cov0" title="0">{
        return nil, errors.New("not implemented in mock")
}</span>

func (m *mockLDAPClient) WithCredentials(_, _ string) (*ldap.LDAP, error) <span class="cov0" title="0">{
        return nil, errors.New("not implemented in mock")
}</span>

// NewMockUser creates a mock LDAP user for testing purposes.
// Parameters: dn (Distinguished Name), samAccountName, enabled status, and group DNs.
// Returns a properly configured ldap.User instance for use in unit tests.
func NewMockUser(_ string, samAccountName string, enabled bool, groups []string) ldap.User <span class="cov10" title="22">{
        return ldap.User{
                SAMAccountName: samAccountName,
                Enabled:        enabled,
                Groups:         groups,
        }
}</span>

// NewMockGroup creates a mock LDAP group for testing purposes.
// Parameters: dn (Distinguished Name), group name, and member user DNs.
// Returns a properly configured ldap.Group instance for use in unit tests.
func NewMockGroup(_, _ string, members []string) ldap.Group <span class="cov9" title="20">{
        return ldap.Group{
                Members: members,
        }
}</span>

// NewMockComputer creates a mock LDAP computer for testing purposes.
// Parameters: dn (Distinguished Name), samAccountName, enabled status, and group DNs.
// Returns a properly configured ldap.Computer instance for use in unit tests.
func NewMockComputer(_ string, samAccountName string, enabled bool, groups []string) ldap.Computer <span class="cov6" title="6">{
        return ldap.Computer{
                SAMAccountName: samAccountName,
                Enabled:        enabled,
                Groups:         groups,
        }
}</span>
</pre>
		
		<pre class="file" id="file5" style="display: none">// Package options provides configuration parsing and environment variable handling
// for the LDAP Manager application.
package options

import (
        "flag"
        "os"
        "strconv"
        "time"

        "github.com/joho/godotenv"
        ldap "github.com/netresearch/simple-ldap-go"
        "github.com/rs/zerolog"
        "github.com/rs/zerolog/log"
)

// Opts holds all configuration options for the LDAP Manager application.
// It includes LDAP connection settings, session management, and logging configuration.
type Opts struct {
        LogLevel zerolog.Level

        LDAP             ldap.Config
        ReadonlyUser     string
        ReadonlyPassword string

        PersistSessions bool
        SessionPath     string
        SessionDuration time.Duration
}

func panicWhenEmpty(name string, value *string) <span class="cov0" title="0">{
        if *value == "" </span><span class="cov0" title="0">{
                log.Fatal().Msgf("the option --%s is required", name)
        }</span>
}

func envStringOrDefault(name, d string) string <span class="cov10" title="16">{
        if v, exists := os.LookupEnv(name); exists &amp;&amp; v != "" </span><span class="cov8" title="11">{
                return v
        }</span>

        <span class="cov6" title="5">return d</span>
}

func envDurationOrDefault(name string, d time.Duration) time.Duration <span class="cov3" title="2">{
        raw := envStringOrDefault(name, d.String())

        v, err := time.ParseDuration(raw)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatal().Msgf("could not parse environment variable \"%s\" (containing \"%s\") as duration: %v", name, raw, err)
        }</span>

        <span class="cov3" title="2">return v</span>
}

func envLogLevelOrDefault(name string, d zerolog.Level) string <span class="cov3" title="2">{
        raw := envStringOrDefault(name, d.String())

        if _, err := zerolog.ParseLevel(raw); err != nil </span><span class="cov0" title="0">{
                log.Fatal().Msgf("could not parse environment variable \"%s\" (containing \"%s\") as log level: %v", name, raw, err)
        }</span>

        <span class="cov3" title="2">return raw</span>
}

func envBoolOrDefault(name string, d bool) bool <span class="cov8" title="9">{
        raw := envStringOrDefault(name, strconv.FormatBool(d))

        v2, err := strconv.ParseBool(raw)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatal().Msgf("could not parse environment variable \"%s\" (containing \"%s\") as bool: %v", name, raw, err)
        }</span>

        <span class="cov8" title="9">return v2</span>
}

// Parse parses command line flags and environment variables to build application configuration.
// It loads from .env files, parses flags, and validates required settings.
func Parse() *Opts <span class="cov0" title="0">{
        if err := godotenv.Load(".env.local", ".env"); err != nil </span><span class="cov0" title="0">{
                log.Warn().Err(err).Msg("could not load .env file")
        }</span>

        <span class="cov0" title="0">var (
                fLogLevel = flag.String("log-level", envLogLevelOrDefault("LOG_LEVEL", zerolog.InfoLevel),
                        "Log level. Valid values are: trace, debug, info, warn, error, fatal, panic.")

                fLdapServer = flag.String("ldap-server", envStringOrDefault("LDAP_SERVER", ""),
                        "LDAP server URI, has to begin with `ldap://` or `ldaps://`. "+
                                "If this is an ActiveDirectory server, this *has* to be `ldaps://`.")
                fIsActiveDirectory = flag.Bool("active-directory", envBoolOrDefault("LDAP_IS_AD", false),
                        "Mark the LDAP server as ActiveDirectory.")
                fBaseDN       = flag.String("base-dn", envStringOrDefault("LDAP_BASE_DN", ""), "Base DN of your LDAP directory.")
                fReadonlyUser = flag.String("readonly-user", envStringOrDefault("LDAP_READONLY_USER", ""),
                        "User that can read all users in your LDAP directory.")
                fReadonlyPassword = flag.String("readonly-password", envStringOrDefault("LDAP_READONLY_PASSWORD", ""),
                        "Password for the readonly user.")

                fPersistSessions = flag.Bool("persist-sessions", envBoolOrDefault("PERSIST_SESSIONS", false),
                        "Whether or not to persist sessions into a Bolt database. Useful for development.")
                fSessionPath = flag.String("session-path", envStringOrDefault("SESSION_PATH", "db.bbolt"),
                        "Path to the session database file. (Only required when --persist-sessions is set)")
                fSessionDuration = flag.Duration("session-duration", envDurationOrDefault("SESSION_DURATION", 30*time.Minute),
                        "Duration of the session. (Only required when --persist-sessions is set)")
        )

        if !flag.Parsed() </span><span class="cov0" title="0">{
                flag.Parse()
        }</span>

        <span class="cov0" title="0">logLevel, err := zerolog.ParseLevel(*fLogLevel)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatal().Err(err).Msg("could not parse log level")
        }</span>

        <span class="cov0" title="0">panicWhenEmpty("ldap-server", fLdapServer)
        panicWhenEmpty("base-dn", fBaseDN)
        panicWhenEmpty("readonly-user", fReadonlyUser)
        panicWhenEmpty("readonly-password", fReadonlyPassword)

        if *fPersistSessions </span><span class="cov0" title="0">{
                panicWhenEmpty("session-path", fSessionPath)
        }</span>

        <span class="cov0" title="0">ldapConfig := ldap.Config{
                Server:            *fLdapServer,
                BaseDN:            *fBaseDN,
                IsActiveDirectory: *fIsActiveDirectory,
        }

        return &amp;Opts{
                LogLevel: logLevel,

                LDAP:             ldapConfig,
                ReadonlyUser:     *fReadonlyUser,
                ReadonlyPassword: *fReadonlyPassword,

                PersistSessions: *fPersistSessions,
                SessionPath:     *fSessionPath,
                SessionDuration: *fSessionDuration,
        }</span>
}
</pre>
		
		<pre class="file" id="file6" style="display: none">// Package web provides HTTP handlers and middleware for the LDAP Manager web application.
package web

import (
        "github.com/gofiber/fiber/v2"
        "github.com/rs/zerolog/log"

        "github.com/netresearch/ldap-manager/internal"
        "github.com/netresearch/ldap-manager/internal/web/templates"
)

func (a *App) logoutHandler(c *fiber.Ctx) error <span class="cov8" title="1">{
        sess, err := a.sessionStore.Get(c)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov8" title="1">if err := sess.Destroy(); err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov8" title="1">return c.Redirect("/login")</span>
}

func (a *App) loginHandler(c *fiber.Ctx) error <span class="cov8" title="1">{
        sess, err := a.sessionStore.Get(c)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov8" title="1">username := c.FormValue("username")
        password := c.FormValue("password")

        if username != "" &amp;&amp; password != "" </span><span class="cov0" title="0">{
                user, err := a.ldapClient.CheckPasswordForSAMAccountName(username, password)
                if err != nil </span><span class="cov0" title="0">{
                        log.Error().Err(err).Msg("could not check password")

                        c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

                        return templates.Login(
                                templates.Flashes(templates.ErrorFlash("Invalid username or password")), "",
                        ).Render(c.UserContext(), c.Response().BodyWriter())
                }</span>

                <span class="cov0" title="0">sess.Set("dn", user.DN())
                if err := sess.Save(); err != nil </span><span class="cov0" title="0">{
                        return handle500(c, err)
                }</span>

                <span class="cov0" title="0">return c.Redirect("/")</span>
        }

        <span class="cov8" title="1">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.Login(templates.Flashes(), internal.FormatVersion()).Render(
                c.UserContext(), c.Response().BodyWriter())</span>
}
</pre>
		
		<pre class="file" id="file7" style="display: none">package web

import (
        "net/url"
        "sort"

        "github.com/gofiber/fiber/v2"

        "github.com/netresearch/ldap-manager/internal/web/templates"
)

func (a *App) computersHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        showDisabled := c.Query("show-disabled", "0") == "1"
        computers := a.ldapCache.FindComputers(showDisabled)
        sort.SliceStable(computers, func(i, j int) bool </span><span class="cov0" title="0">{
                return computers[i].CN() &lt; computers[j].CN()
        }</span>)

        <span class="cov0" title="0">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.Computers(computers).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

func (a *App) computerHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        computerDN, err := url.PathUnescape(c.Params("computerDN"))
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">thinComputer, err := a.ldapCache.FindComputerByDN(computerDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">computer := a.ldapCache.PopulateGroupsForComputer(thinComputer)
        sort.SliceStable(computer.Groups, func(i, j int) bool </span><span class="cov0" title="0">{
                return computer.Groups[i].CN() &lt; computer.Groups[j].CN()
        }</span>)

        <span class="cov0" title="0">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.Computer(computer).Render(c.UserContext(), c.Response().BodyWriter())</span>
}
</pre>
		
		<pre class="file" id="file8" style="display: none">package web

import (
        "net/url"
        "sort"

        "github.com/gofiber/fiber/v2"
        ldap "github.com/netresearch/simple-ldap-go"

        "github.com/netresearch/ldap-manager/internal/ldap_cache"
        "github.com/netresearch/ldap-manager/internal/web/templates"
)

func (a *App) groupsHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        groups := a.ldapCache.FindGroups()
        sort.SliceStable(groups, func(i, j int) bool </span><span class="cov0" title="0">{
                return groups[i].CN() &lt; groups[j].CN()
        }</span>)

        <span class="cov0" title="0">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.Groups(groups).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

func (a *App) groupHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        groupDN, err := url.PathUnescape(c.Params("groupDN"))
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">thinGroup, err := a.ldapCache.FindGroupByDN(groupDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">showDisabledUsers := c.Query("show-disabled", "0") == "1"
        group := a.ldapCache.PopulateUsersForGroup(thinGroup, showDisabledUsers)
        sort.SliceStable(group.Members, func(i, j int) bool </span><span class="cov0" title="0">{
                return group.Members[i].CN() &lt; group.Members[j].CN()
        }</span>)
        <span class="cov0" title="0">unassignedUsers := a.findUnassignedUsers(group)
        sort.SliceStable(unassignedUsers, func(i, j int) bool </span><span class="cov0" title="0">{
                return unassignedUsers[i].CN() &lt; unassignedUsers[j].CN()
        }</span>)

        <span class="cov0" title="0">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.Group(group, unassignedUsers, templates.Flashes()).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

type groupModifyForm struct {
        AddUser         *string `form:"adduser"`
        RemoveUser      *string `form:"removeuser"`
        PasswordConfirm string  `form:"password_confirm"`
}

func (a *App) groupModifyHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        groupDN, err := url.PathUnescape(c.Params("groupDN"))
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">form := groupModifyForm{}
        if err := c.BodyParser(&amp;form); err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">if form.RemoveUser == nil &amp;&amp; form.AddUser == nil </span><span class="cov0" title="0">{
                return c.Redirect("/groups/" + groupDN)
        }</span>

        // Require password confirmation for sensitive operations
        <span class="cov0" title="0">if form.PasswordConfirm == "" </span><span class="cov0" title="0">{
                return a.renderGroupWithError(c, groupDN, "Password confirmation required for modifications")
        }</span>

        <span class="cov0" title="0">executorDN, err := RequireUserDN(c)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">l, err := a.authenticateLDAPClient(executorDN, form.PasswordConfirm)
        if err != nil </span><span class="cov0" title="0">{
                return a.renderGroupWithError(c, groupDN, "Invalid password")
        }</span>

        // Perform the group modification
        <span class="cov0" title="0">if err := a.performGroupModification(l, &amp;form, groupDN); err != nil </span><span class="cov0" title="0">{
                return a.renderGroupWithError(c, groupDN, "Failed to modify: "+err.Error())
        }</span>

        // Render success response
        <span class="cov0" title="0">return a.renderGroupWithSuccess(c, groupDN, "Successfully modified group")</span>
}

func (a *App) findUnassignedUsers(group *ldap_cache.FullLDAPGroup) []ldap.User <span class="cov0" title="0">{
        return a.ldapCache.Users.Filter(func(u ldap.User) bool </span><span class="cov0" title="0">{
                for _, g := range u.Groups </span><span class="cov0" title="0">{
                        if g == group.DN() </span><span class="cov0" title="0">{
                                return false
                        }</span>
                }

                <span class="cov0" title="0">return true</span>
        })
}

// loadGroupData loads and prepares group data with proper sorting
func (a *App) loadGroupData(c *fiber.Ctx, groupDN string) (*ldap_cache.FullLDAPGroup, []ldap.User, error) <span class="cov0" title="0">{
        thinGroup, err := a.ldapCache.FindGroupByDN(groupDN)
        if err != nil </span><span class="cov0" title="0">{
                return nil, nil, err
        }</span>

        <span class="cov0" title="0">showDisabledUsers := c.Query("show-disabled", "0") == "1"
        group := a.ldapCache.PopulateUsersForGroup(thinGroup, showDisabledUsers)
        sort.SliceStable(group.Members, func(i, j int) bool </span><span class="cov0" title="0">{
                return group.Members[i].CN() &lt; group.Members[j].CN()
        }</span>)
        <span class="cov0" title="0">unassignedUsers := a.findUnassignedUsers(group)
        sort.SliceStable(unassignedUsers, func(i, j int) bool </span><span class="cov0" title="0">{
                return unassignedUsers[i].CN() &lt; unassignedUsers[j].CN()
        }</span>)

        <span class="cov0" title="0">return group, unassignedUsers, nil</span>
}

// renderGroupWithError renders the group page with an error message
func (a *App) renderGroupWithError(c *fiber.Ctx, groupDN, errorMsg string) error <span class="cov0" title="0">{
        c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)
        group, unassignedUsers, err := a.loadGroupData(c, groupDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">return templates.Group(
                group, unassignedUsers,
                templates.Flashes(templates.ErrorFlash(errorMsg)),
        ).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

// renderGroupWithSuccess renders the group page with a success message
func (a *App) renderGroupWithSuccess(c *fiber.Ctx, groupDN, successMsg string) error <span class="cov0" title="0">{
        c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)
        group, unassignedUsers, err := a.loadGroupData(c, groupDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">return templates.Group(
                group, unassignedUsers,
                templates.Flashes(templates.SuccessFlash(successMsg)),
        ).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

// performGroupModification handles the actual LDAP group modification operation
func (a *App) performGroupModification(l *ldap.LDAP, form *groupModifyForm, groupDN string) error <span class="cov0" title="0">{
        if form.AddUser != nil </span><span class="cov0" title="0">{
                if err := l.AddUserToGroup(*form.AddUser, groupDN); err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">a.ldapCache.OnAddUserToGroup(*form.AddUser, groupDN)</span>
        } else<span class="cov0" title="0"> if form.RemoveUser != nil </span><span class="cov0" title="0">{
                if err := l.RemoveUserFromGroup(*form.RemoveUser, groupDN); err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">a.ldapCache.OnRemoveUserFromGroup(*form.RemoveUser, groupDN)</span>
        }

        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file9" style="display: none">package web

import (
        "github.com/gofiber/fiber/v2"
)

// healthHandler provides a comprehensive health check endpoint.
// Returns cache metrics, system health status, and operational statistics.
func (a *App) healthHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        healthStats := a.ldapCache.GetHealthCheck()

        var statusCode int
        switch healthStats.HealthStatus </span>{
        case "healthy":<span class="cov0" title="0">
                statusCode = fiber.StatusOK</span>
        case "degraded":<span class="cov0" title="0">
                statusCode = fiber.StatusOK</span> // Still functional
        case "unhealthy":<span class="cov0" title="0">
                statusCode = fiber.StatusServiceUnavailable</span>
        default:<span class="cov0" title="0">
                statusCode = fiber.StatusInternalServerError</span>
        }

        <span class="cov0" title="0">c.Status(statusCode)

        return c.JSON(healthStats)</span>
}

// readinessHandler provides a simple readiness check.
// Returns 200 OK if the cache system is operational and ready to serve requests.
// Includes cache warming status to indicate if initial population is complete.
func (a *App) readinessHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        isHealthy := a.ldapCache.IsHealthy()
        isWarmedUp := a.ldapCache.IsWarmedUp()

        if isHealthy &amp;&amp; isWarmedUp </span><span class="cov0" title="0">{
                return c.JSON(fiber.Map{
                        "status":    "ready",
                        "cache":     "healthy",
                        "warmed_up": true,
                })
        }</span>

        <span class="cov0" title="0">c.Status(fiber.StatusServiceUnavailable)
        status := "not ready"
        reason := ""

        switch </span>{
        case !isHealthy &amp;&amp; !isWarmedUp:<span class="cov0" title="0">
                reason = "cache unhealthy and not warmed up"</span>
        case !isHealthy:<span class="cov0" title="0">
                reason = "cache degraded or unhealthy"</span>
        case !isWarmedUp:<span class="cov0" title="0">
                reason = "cache warming in progress"
                status = "warming up"</span>
        }

        <span class="cov0" title="0">return c.JSON(fiber.Map{
                "status":    status,
                "cache":     reason,
                "warmed_up": isWarmedUp,
        })</span>
}

// livenessHandler provides a simple liveness check.
// Returns 200 OK if the application is running and responsive.
func (a *App) livenessHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        return c.JSON(fiber.Map{
                "status": "alive",
                "uptime": a.ldapCache.GetMetrics().GetUptime().String(),
        })
}</span>
</pre>
		
		<pre class="file" id="file10" style="display: none">package web

import (
        "github.com/gofiber/fiber/v2"
        "github.com/rs/zerolog/log"
)

// RequireAuth middleware ensures user is authenticated before accessing protected routes
// It checks for valid session and redirects unauthenticated users to login page
func (a *App) RequireAuth() fiber.Handler <span class="cov10" title="10">{
        return func(c *fiber.Ctx) error </span><span class="cov3" title="2">{
                sess, err := a.sessionStore.Get(c)
                if err != nil </span><span class="cov0" title="0">{
                        log.Error().Err(err).Msg("failed to get session in auth middleware")

                        return c.Redirect("/login")
                }</span>

                // Check if session is fresh (no authenticated user)
                <span class="cov3" title="2">if sess.Fresh() </span><span class="cov3" title="2">{
                        log.Debug().Str("path", c.Path()).Msg("unauthenticated access attempt, redirecting to login")

                        return c.Redirect("/login")
                }</span>

                // Get user DN from session
                <span class="cov0" title="0">userDN, ok := sess.Get("dn").(string)
                if !ok || userDN == "" </span><span class="cov0" title="0">{
                        log.Warn().Msg("session exists but no user DN found, redirecting to login")

                        return c.Redirect("/login")
                }</span>

                // Store user DN in context for handlers to use
                <span class="cov0" title="0">c.Locals("userDN", userDN)

                log.Debug().
                        Str("userDN", userDN).
                        Str("path", c.Path()).
                        Msg("authenticated user accessing protected route")

                return c.Next()</span>
        }
}

// OptionalAuth middleware provides user context if authenticated but doesn't require it
// Useful for routes that behave differently for authenticated vs anonymous users
func (a *App) OptionalAuth() fiber.Handler <span class="cov0" title="0">{
        return func(c *fiber.Ctx) error </span><span class="cov0" title="0">{
                sess, err := a.sessionStore.Get(c)
                if err != nil </span><span class="cov0" title="0">{
                        // Continue without authentication context
                        return c.Next()
                }</span>

                // If session is fresh, continue without authentication context
                <span class="cov0" title="0">if sess.Fresh() </span><span class="cov0" title="0">{
                        return c.Next()
                }</span>

                // Get user DN from session
                <span class="cov0" title="0">if userDN, ok := sess.Get("dn").(string); ok &amp;&amp; userDN != "" </span><span class="cov0" title="0">{
                        // Store user DN in context for handlers to use
                        c.Locals("userDN", userDN)
                        log.Debug().
                                Str("userDN", userDN).
                                Str("path", c.Path()).
                                Msg("optional auth: user context available")
                }</span>

                <span class="cov0" title="0">return c.Next()</span>
        }
}

// GetUserDN is a helper function to retrieve authenticated user DN from context
// Returns empty string if user is not authenticated
func GetUserDN(c *fiber.Ctx) string <span class="cov0" title="0">{
        if userDN, ok := c.Locals("userDN").(string); ok </span><span class="cov0" title="0">{
                return userDN
        }</span>

        <span class="cov0" title="0">return ""</span>
}

// RequireUserDN is a helper function that returns user DN or handles error
// Should only be called from handlers protected by RequireAuth middleware
func RequireUserDN(c *fiber.Ctx) (string, error) <span class="cov0" title="0">{
        userDN := GetUserDN(c)
        if userDN == "" </span><span class="cov0" title="0">{
                log.Error().Str("path", c.Path()).Msg("RequireUserDN called but no user DN in context")

                return "", fiber.NewError(fiber.StatusUnauthorized, "Authentication required")
        }</span>

        <span class="cov0" title="0">return userDN, nil</span>
}
</pre>
		
		<pre class="file" id="file11" style="display: none">package web

import (
        "net/http"

        "github.com/gofiber/fiber/v2"
        "github.com/gofiber/fiber/v2/middleware/compress"
        "github.com/gofiber/fiber/v2/middleware/filesystem"
        "github.com/gofiber/fiber/v2/middleware/session"
        "github.com/gofiber/storage/bbolt/v2"
        "github.com/gofiber/storage/memory/v2"
        ldap "github.com/netresearch/simple-ldap-go"
        "github.com/rs/zerolog/log"

        "github.com/netresearch/ldap-manager/internal/ldap_cache"
        "github.com/netresearch/ldap-manager/internal/options"
        "github.com/netresearch/ldap-manager/internal/web/static"
        "github.com/netresearch/ldap-manager/internal/web/templates"
)

// App represents the main web application structure.
// It encapsulates LDAP client, cache manager, session store, and Fiber web framework.
// Provides centralized management of authentication, caching, and HTTP request handling.
type App struct {
        ldapClient   *ldap.LDAP
        ldapCache    *ldap_cache.Manager
        sessionStore *session.Store
        fiber        *fiber.App
}

func getSessionStorage(opts *options.Opts) fiber.Storage <span class="cov0" title="0">{
        if opts.PersistSessions </span><span class="cov0" title="0">{
                return bbolt.New(bbolt.Config{
                        Database: opts.SessionPath,
                        Bucket:   "sessions",
                        Reset:    false,
                })
        }</span>

        <span class="cov0" title="0">return memory.New()</span>
}

// NewApp creates a new web application instance with the provided configuration options.
// It initializes the LDAP client, session management, Fiber web server, and registers all routes.
// Returns a configured App instance ready to start serving requests via Listen().
func NewApp(opts *options.Opts) (*App, error) <span class="cov0" title="0">{
        ldapClient, err := ldap.New(opts.LDAP, opts.ReadonlyUser, opts.ReadonlyPassword)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">sessionStore := session.New(session.Config{
                Storage:        getSessionStorage(opts),
                Expiration:     opts.SessionDuration,
                CookieHTTPOnly: true,
                CookieSameSite: "Strict",
        })

        f := fiber.New(fiber.Config{
                AppName:      "netresearch/ldap-manager",
                BodyLimit:    4 * 1024,
                ErrorHandler: handle500,
        })
        f.Use(compress.New(compress.Config{
                Level: compress.LevelBestSpeed,
        }))
        f.Use("/static", filesystem.New(filesystem.Config{
                Root:   http.FS(static.Static),
                MaxAge: 24 * 60 * 60,
        }))

        a := &amp;App{
                ldapClient:   ldapClient,
                ldapCache:    ldap_cache.New(ldapClient),
                sessionStore: sessionStore,
                fiber:        f,
        }

        // Public routes (no authentication required)
        f.All("/login", a.loginHandler)

        // Health check endpoints (no authentication required)
        f.Get("/health", a.healthHandler)
        f.Get("/health/ready", a.readinessHandler)
        f.Get("/health/live", a.livenessHandler)

        // Protected routes (require authentication)
        protected := f.Group("/", a.RequireAuth())
        protected.Get("/", a.indexHandler)
        protected.Get("/users", a.usersHandler)
        protected.Get("/users/:userDN", a.userHandler)
        protected.Post("/users/:userDN", a.userModifyHandler)
        protected.Get("/groups", a.groupsHandler)
        protected.Get("/groups/:groupDN", a.groupHandler)
        protected.Post("/groups/:groupDN", a.groupModifyHandler)
        protected.Get("/computers", a.computersHandler)
        protected.Get("/computers/:computerDN", a.computerHandler)
        protected.Get("/logout", a.logoutHandler)

        f.Use(a.fourOhFourHandler)

        return a, nil</span>
}

// Listen starts the web application server on the specified address.
// It launches the LDAP cache manager in a background goroutine and begins serving HTTP requests.
// This method blocks until the server is shutdown or encounters an error.
func (a *App) Listen(addr string) error <span class="cov0" title="0">{
        go a.ldapCache.Run()

        return a.fiber.Listen(addr)
}</span>

func handle500(c *fiber.Ctx, err error) error <span class="cov0" title="0">{
        log.Error().Err(err).Send()

        c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.FiveHundred(err).Render(c.UserContext(), c.Response().BodyWriter())
}</span>

func (a *App) indexHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Get authenticated user DN from middleware context
        userDN, err := RequireUserDN(c)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">user, err := a.ldapCache.FindUserByDN(userDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.Index(user).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

func (a *App) fourOhFourHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.FourOhFour(c.Path()).Render(c.UserContext(), c.Response().BodyWriter())
}</span>

func (a *App) authenticateLDAPClient(userDN, password string) (*ldap.LDAP, error) <span class="cov0" title="0">{
        executor, err := a.ldapCache.FindUserByDN(userDN)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">return a.ldapClient.WithCredentials(executor.DN(), password)</span>
}
</pre>
		
		<pre class="file" id="file12" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"
)

func base(title string) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;!doctype html&gt;&lt;html lang=\"en\" class=\"h-full bg-black text-white\"&gt;&lt;head&gt;&lt;title&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">var templ_7745c5c3_Var2 string
                templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(title)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/base.templ`, Line: 7, Col: 17}
                }</span>
                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, " - LDAP Manager&lt;/title&gt;&lt;meta charset=\"UTF-8\"&gt;&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;&lt;meta name=\"darkreader-lock\"&gt;&lt;link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/static/favicon-32x32.png\"&gt;&lt;link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/static/favicon-16x16.png\"&gt;&lt;link rel=\"icon\" type=\"image/x-icon\" href=\"/static/favicon.ico\"&gt;&lt;link rel=\"manifest\" href=\"/static/site.webmanifest\"&gt;&lt;link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/static/apple-touch-icon.png\"&gt;&lt;link rel=\"mask-icon\" href=\"/static/safari-pinned-tab.svg\" color=\"#000000\"&gt;&lt;meta name=\"theme-color\" content=\"#b8e9f4\"&gt;&lt;meta name=\"msapplication-TileColor\" content=\"#b8e9f4\"&gt;&lt;link rel=\"preload\" href=\"/static/styles.css\" as=\"style\"&gt;&lt;link rel=\"stylesheet\" href=\"/static/styles.css\"&gt;&lt;/head&gt;&lt;body class=\"flex h-full flex-col overflow-y-scroll\"&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templ_7745c5c3_Var1.Render(ctx, templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "&lt;/body&gt;&lt;/html&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file13" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"

        "github.com/netresearch/ldap-manager/internal/ldap_cache"

        ldap "github.com/netresearch/simple-ldap-go"
)

type computer struct {
        ldap.Computer
}

func (c computer) ID() string <span class="cov0" title="0">{
        return c.DN()
}</span>
func (c computer) Name() string <span class="cov0" title="0">{
        return c.CN()
}</span>
func (c computer) URL() templ.SafeURL <span class="cov0" title="0">{
        return computerUrl(c.Computer)
}</span>
func (c computer) Enabled() bool <span class="cov0" title="0">{
        return c.Computer.Enabled
}</span>

func specializeComputers(computers []ldap.Computer) []Displayer <span class="cov0" title="0">{
        return mapSlice(computers, func(c ldap.Computer) Displayer </span><span class="cov0" title="0">{
                return computer{c}
        }</span>)
}

func Computer(computer *ldap_cache.FullLDAPComputer) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;h1 class=\"text-3xl\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var3 string
                        templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(computer.CN())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/computer.templ`, Line: 31, Col: 38}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, " (")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var4 string
                        templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(computer.SAMAccountName)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/computer.templ`, Line: 31, Col: 67}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, ")&lt;/h1&gt;&lt;p class=\"text-sm text-gray-500\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var5 string
                        templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(computer.DN())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/computer.templ`, Line: 33, Col: 18}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, " ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if !computer.Enabled </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = lockIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "&lt;/p&gt;&lt;h2 class=\"mt-4 text-xl\"&gt;Details:&lt;/h2&gt;&lt;p&gt;Operating system: ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var6 string
                        templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(computer.OS)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/computer.templ`, Line: 39, Col: 36}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "&lt;/p&gt;&lt;p&gt;Operating system version: ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var7 string
                        templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(computer.OSVersion)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/computer.templ`, Line: 40, Col: 51}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "&lt;/p&gt;&lt;h2 class=\"mt-4 text-xl\"&gt;Groups:&lt;/h2&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = list(specializeGroups(computer.Groups)).Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, " ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if len(computer.Groups) == 0 </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "&lt;p class=\"text-gray-500\"&gt;No groups&lt;/p&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn(string(computerUrl(computer.Computer)), computer.CN(), []Flash{}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func Computers(computers []ldap.Computer) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var8 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var8 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var8 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var9 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "&lt;h1 class=\"mb-4 text-3xl\"&gt;All computers&lt;/h1&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = list(specializeComputers(computers)).Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn("/computers", "All Computers", []Flash{}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var9), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func computerUrl(computer ldap.Computer) templ.SafeURL <span class="cov0" title="0">{
        return templ.SafeURL("/computers/" + computer.DN())
}</span>

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file14" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"
)

func FourOhFour(path string) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;div class=\"flex flex-col items-center gap-8\"&gt;&lt;h1 class=\"text-3xl\"&gt;It appears that this page does not exist.&lt;/h1&gt;&lt;a href=\"/\" class=\"mx-auto block w-fit rounded-md border border-white bg-white px-4 py-2 text-black transition-colors hocus:bg-black hocus:text-white\"&gt;Back&lt;/a&gt;&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn(path, "404", []Flash{}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func FiveHundred(err error) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var3 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var3 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var3 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "&lt;div class=\"max-w-lg space-y-4 rounded-md border border-gray-600 p-8\"&gt;&lt;p class=\"text-red-500\"&gt;An error occurred:&lt;/p&gt;&lt;p class=\"text-red-500\"&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">var templ_7745c5c3_Var4 string
                templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(err.Error())
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/errors.templ`, Line: 20, Col: 39}
                }</span>
                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "&lt;/p&gt;&lt;/div&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file15" style="display: none">// Package templates provides flash message functionality for the web interface.
// Handles success, error, and info messages with associated styling classes.
package templates

// FlashType represents the category of flash message for styling and behavior.
type FlashType string

const (
        // FlashTypeSuccess represents a successful operation or positive feedback.
        FlashTypeSuccess FlashType = "success"
        // FlashTypeError represents an error condition or failed operation.
        FlashTypeError FlashType = "error"
        // FlashTypeInfo represents informational messages or neutral feedback.
        FlashTypeInfo FlashType = "info"
)

// Flashes creates a slice of flash messages from the provided Flash instances.
// Utility function for collecting multiple flash messages into a single collection.
func Flashes(templates ...Flash) []Flash <span class="cov5" title="2">{
        return templates
}</span>

// Flash represents a user-facing message with associated type and styling.
type Flash struct {
        Message string
        Type    FlashType
}

// SuccessFlash creates a success flash message with the provided text.
func SuccessFlash(message string) Flash <span class="cov8" title="3">{
        return Flash{
                Message: message,
                Type:    FlashTypeSuccess,
        }
}</span>

// ErrorFlash creates an error flash message with the provided text.
func ErrorFlash(message string) Flash <span class="cov8" title="3">{
        return Flash{
                Message: message,
                Type:    FlashTypeError,
        }
}</span>

// InfoFlash creates an informational flash message with the provided text.
func InfoFlash(message string) Flash <span class="cov5" title="2">{
        return Flash{
                Message: message,
                Type:    FlashTypeInfo,
        }
}</span>

// IsSuccess returns true if this flash message represents a successful operation.
func (f Flash) IsSuccess() bool <span class="cov8" title="3">{
        return f.Type == FlashTypeSuccess
}</span>

// IsError returns true if this flash message represents an error condition.
func (f Flash) IsError() bool <span class="cov8" title="3">{
        return f.Type == FlashTypeError
}</span>

// IsInfo returns true if this flash message represents informational content.
func (f Flash) IsInfo() bool <span class="cov8" title="3">{
        return f.Type == FlashTypeInfo
}</span>

const flashSuccessClasses = "border-green-500"
const flashErrorClasses = "border-red-500"
const flashInfoClasses = "border-blue-500"

// BorderColor returns the appropriate CSS border class for the flash message type.
func (f Flash) BorderColor() string <span class="cov10" title="4">{
        switch f.Type </span>{
        case FlashTypeSuccess:<span class="cov1" title="1">
                return flashSuccessClasses</span>
        case FlashTypeError:<span class="cov1" title="1">
                return flashErrorClasses</span>
        case FlashTypeInfo:<span class="cov1" title="1">
                return flashInfoClasses</span>
        default:<span class="cov1" title="1">
                panic("unknown flash type")</span>
        }
}
</pre>
		
		<pre class="file" id="file16" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"

        "github.com/netresearch/ldap-manager/internal/ldap_cache"

        ldap "github.com/netresearch/simple-ldap-go"
)

type group struct {
        ldap.Group
}

func (g group) ID() string <span class="cov0" title="0">{
        return g.DN()
}</span>
func (g group) Name() string <span class="cov0" title="0">{
        return g.CN()
}</span>
func (g group) URL() templ.SafeURL <span class="cov0" title="0">{
        return groupUrl(g.Group)
}</span>
func (g group) Enabled() bool <span class="cov0" title="0">{
        return true
}</span>

func specializeGroups(groups []ldap.Group) []Displayer <span class="cov0" title="0">{
        return mapSlice(groups, func(c ldap.Group) Displayer </span><span class="cov0" title="0">{
                return group{c}
        }</span>)
}

func Group(group *ldap_cache.FullLDAPGroup, unassignedUsers []ldap.User, flashes []Flash) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;h1 class=\"text-3xl\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var3 string
                        templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(group.CN())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 31, Col: 35}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "&lt;/h1&gt;&lt;p class=\"text-sm text-gray-500\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var4 string
                        templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(group.DN())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 32, Col: 47}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "&lt;/p&gt;&lt;h2 class=\"mt-4 text-xl\"&gt;Members:&lt;/h2&gt;&lt;div class=\"flex flex-col justify-between divide-y divide-gray-600\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">for _, user := range group.Members </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "&lt;div class=\"flex items-center transition-colors list-outer-hocus:bg-gray-700/50\"&gt;&lt;a href=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var5 templ.SafeURL
                                templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinURLErrs(userUrl(user))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 38, Col: 26}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "\" class=\"flex w-full items-center gap-2 py-2 pl-3 transition-transform focus:outline-none hocus:translate-x-2 [&amp;&gt;svg]:text-gray-500 [&amp;&gt;svg]:hocus:text-white\" title=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var6 string
                                templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(user.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 40, Col: 23}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "\"&gt;&lt;span&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var7 string
                                templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(user.CN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 42, Col: 23}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, " (")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var8 string
                                templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(user.SAMAccountName)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 42, Col: 48}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, ")&lt;/span&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = rightArrowIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "&lt;/a&gt;&lt;form action=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var9 templ.SafeURL
                                templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinURLErrs(groupUrl(group.Group))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 45, Col: 41}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "\" method=\"POST\" class=\"flex-end pr-3\"&gt;&lt;input type=\"hidden\" name=\"removeuser\" value=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var10 string
                                templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(user.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 46, Col: 62}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "\"&gt; &lt;button class=\"flex items-center rounded-md p-1 ring-white focus:ring-1 [&amp;&gt;svg]:text-gray-500 [&amp;&gt;svg]:hocus:text-white\" type=\"submit\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = xIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "&lt;/button&gt;&lt;/form&gt;&lt;/div&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if len(group.Members) == 0 </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "&lt;p class=\"text-gray-500\"&gt;No members&lt;/p&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, " &lt;h2 class=\"mt-4 text-xl\"&gt;Add user&lt;/h2&gt;&lt;form action=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var11 templ.SafeURL
                        templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinURLErrs(groupUrl(group.Group))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 61, Col: 38}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "\" method=\"POST\"&gt;&lt;div class=\"flex items-center gap-2\"&gt;&lt;select class=\"form-select flex-1 rounded-md border border-gray-600 bg-black py-1 pl-3 pr-8 transition-colors focus:border-white focus:ring-0\" name=\"adduser\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">for _, user := range unassignedUsers </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "&lt;option value=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var12 string
                                templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(user.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 68, Col: 31}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var13 string
                                templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(user.CN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 68, Col: 45}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, " (")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var14 string
                                templ_7745c5c3_Var14, templ_7745c5c3_Err = templ.JoinStringErrs(user.SAMAccountName)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 68, Col: 70}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var14))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, ")&lt;/option&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "&lt;/select&gt; &lt;button type=\"submit\" class=\"flex items-center rounded-md border border-white bg-white p-2 text-black transition-colors focus:outline-none hocus:bg-black hocus:text-white\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = plusIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, "&lt;/button&gt;&lt;/div&gt;&lt;/form&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn(string(groupUrl(group.Group)), group.CN(), flashes).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func Groups(groups []ldap.Group) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var15 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var15 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var15 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var16 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, "&lt;h1 class=\"mb-4 text-3xl\"&gt;All groups&lt;/h1&gt;&lt;div class=\"flex flex-col justify-between divide-y divide-gray-600\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">for _, group := range groups </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 24, "&lt;div class=\"flex items-center transition-colors list-outer-hocus:bg-gray-700/50\"&gt;&lt;a href=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var17 templ.SafeURL
                                templ_7745c5c3_Var17, templ_7745c5c3_Err = templ.JoinURLErrs(groupUrl(group))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 89, Col: 28}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var17))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 25, "\" class=\"flex w-full items-center gap-2 py-2 pl-3 transition-transform focus:outline-none hocus:translate-x-2 [&amp;&gt;svg]:text-gray-500 [&amp;&gt;svg]:hocus:text-white\" title=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var18 string
                                templ_7745c5c3_Var18, templ_7745c5c3_Err = templ.JoinStringErrs(group.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 91, Col: 24}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var18))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 26, "\"&gt;&lt;span&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var19 string
                                templ_7745c5c3_Var19, templ_7745c5c3_Err = templ.JoinStringErrs(group.CN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/groups.templ`, Line: 93, Col: 24}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var19))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 27, "&lt;/span&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = rightArrowIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 28, "&lt;/a&gt;&lt;/div&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 29, "&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn("/groups", "Groups", []Flash{}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var16), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func groupUrl(group ldap.Group) templ.SafeURL <span class="cov0" title="0">{
        return templ.SafeURL("/groups/" + group.DN())
}</span>

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file17" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"
)

func homeIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 20 20\" class=\"inline-block h-4 w-4\"&gt;&lt;path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z\" clip-rule=\"evenodd\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func usersIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var2 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var2 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var2 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 20 20\" class=\"inline-block h-4 w-4\"&gt;&lt;path fill=\"currentColor\" d=\"M10 8a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm-6.535 6.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1c.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func groupIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var3 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var3 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var3 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 20 20\" class=\"inline-block h-4 w-4\"&gt;&lt;path fill=\"currentColor\" d=\"M10 9a3 3 0 1 0 0-6a3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm-4.51 7.326a.78.78 0 0 1-.358-.442a3 3 0 0 1 4.308-3.516a6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655Zm14.95.654a4.97 4.97 0 0 0 2.07-.654a.78.78 0 0 0 .357-.442a3 3 0 0 0-4.308-3.517a6.484 6.484 0 0 1 1.907 3.96a2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0a2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71a5 5 0 0 1 9.947 0a.843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func laptopIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var4 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var4 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var4 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 20 20\" class=\"inline-block h-4 w-4\"&gt;&lt;path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M2 4.25A2.25 2.25 0 0 1 4.25 2h11.5A2.25 2.25 0 0 1 18 4.25v8.5A2.25 2.25 0 0 1 15.75 15h-3.105a3.501 3.501 0 0 0 1.1 1.677A.75.75 0 0 1 13.26 18H6.74a.75.75 0 0 1-.484-1.323A3.501 3.501 0 0 0 7.355 15H4.25A2.25 2.25 0 0 1 2 12.75v-8.5Zm1.5 0a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-.75.75H4.25a.75.75 0 0 1-.75-.75v-7.5Z\" clip-rule=\"evenodd\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func logoutIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var5 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var5 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var5 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"inline-block h-4 w-4\"&gt;&lt;path fill=\"currentColor\" d=\"M5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h7v2H5v14h7v2H5Zm11-4l-1.375-1.45l2.55-2.55H9v-2h8.175l-2.55-2.55L16 7l5 5l-5 5Z\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func lockIcon(class ...string) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var6 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var6 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var6 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                var templ_7745c5c3_Var7 = []any{"inline-block h-4 w-4", class}
                templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var7...)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 20 20\" class=\"")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">var templ_7745c5c3_Var8 string
                templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var7).String())
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/icons.templ`, Line: 1, Col: 0}
                }</span>
                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "\"&gt;&lt;path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z\" clip-rule=\"evenodd\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func lockOpenIcon(class ...string) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var9 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var9 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var9 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                var templ_7745c5c3_Var10 = []any{"inline-block h-4 w-4", class}
                templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var10...)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 20 20\" class=\"")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">var templ_7745c5c3_Var11 string
                templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var10).String())
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/icons.templ`, Line: 1, Col: 0}
                }</span>
                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "\"&gt;&lt;path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M14.5 1A4.5 4.5 0 0 0 10 5.5V9H3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-1.5V5.5a3 3 0 1 1 6 0v2.75a.75.75 0 0 0 1.5 0V5.5A4.5 4.5 0 0 0 14.5 1Z\" clip-rule=\"evenodd\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func plusIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var12 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var12 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var12 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" class=\"inline-block h-4 w-4\"&gt;&lt;path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M12 4.5v15m7.5-7.5h-15\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func rightArrowIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var13 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var13 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var13 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"inline-block transition-colors\"&gt;&lt;path fill=\"currentColor\" d=\"m14 18l-1.4-1.45L16.15 13H4v-2h12.15L12.6 7.45L14 6l6 6l-6 6Z\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func xIcon() templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var14 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var14 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var14 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "&lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 20 20\" class=\"inline-block h-4 w-4 transition-colors\"&gt;&lt;path fill=\"currentColor\" d=\"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94L6.28 5.22Z\"&gt;&lt;/path&gt;&lt;/svg&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file18" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"
        ldap "github.com/netresearch/simple-ldap-go"
)

func Index(user *ldap.User) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;h1 class=\"mb-4 text-3xl\"&gt;Hi ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var3 string
                        templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(user.CN())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/index.templ`, Line: 7, Col: 42}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "!&lt;/h1&gt;&lt;h2 class=\"mb-2 text-xl\"&gt;Your user information&lt;/h2&gt;&lt;div class=\"rounded-md border border-gray-600 px-4 py-3\"&gt;&lt;p&gt;&lt;span&gt;CN: &lt;/span&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = Code(user.CN()).Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "&lt;/p&gt;&lt;p&gt;&lt;span&gt;DN: &lt;/span&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = Code(user.DN()).Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "&lt;/p&gt;&lt;p&gt;&lt;span&gt;sAMAccountName: &lt;/span&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = Code(user.SAMAccountName).Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "&lt;/p&gt;&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn("/", "Home", []Flash{}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func Code(content string) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var4 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var4 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var4 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "&lt;span class=\"overflow-hidden overflow-ellipsis whitespace-break-spaces break-words rounded-md bg-gray-900 px-1 py-[2px] font-mono\"&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">var templ_7745c5c3_Var5 string
                templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(content)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/index.templ`, Line: 25, Col: 11}
                }</span>
                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "&lt;/span&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file19" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"
)

func list(list []Displayer) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;div class=\"flex flex-col justify-between divide-y divide-gray-600\"&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">for _, c := range list </span><span class="cov0" title="0">{
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "&lt;div class=\"flex items-center transition-colors list-outer-hocus:bg-gray-700/50\"&gt;&lt;a href=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var2 templ.SafeURL
                        templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinURLErrs(c.URL())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/list.templ`, Line: 8, Col: 19}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\" class=\"flex w-full items-center gap-2 py-2 pl-3 transition-transform focus:outline-none hocus:translate-x-2 [&amp;&gt;svg]:text-gray-500 [&amp;&gt;svg]:hocus:text-white\" title=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var3 string
                        templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(c.ID())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/list.templ`, Line: 10, Col: 19}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "\"&gt;&lt;span&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var4 string
                        templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(c.Name())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/list.templ`, Line: 12, Col: 21}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "&lt;/span&gt; ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if !c.Enabled() </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = lockIcon("text-gray-500").Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = rightArrowIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "&lt;/a&gt;&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                }
                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "&lt;/div&gt;")
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

type Displayer interface {
        ID() string
        Name() string
        URL() templ.SafeURL
        Enabled() bool
}

func mapSlice[A any, B any](list []A, convert func(A) B) []B <span class="cov0" title="0">{
        var result []B
        for _, c := range list </span><span class="cov0" title="0">{
                result = append(result, convert(c))
        }</span>
        <span class="cov0" title="0">return result</span>
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file20" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"
)

const navbarClasses = "px-3 py-1 rounded-md flex items-center gap-2 transition-colors focus:outline-none hocus:text-white max-sm:px-2 max-sm:py-2 "
const navbarInactiveClasses = "hocus:bg-gray-700/50"
const navbarActiveClasses = "text-white bg-gray-700/80"

func getNavbarClasses(activePage, page string) string <span class="cov0" title="0">{
        if activePage == page </span><span class="cov0" title="0">{
                return navbarClasses + navbarActiveClasses
        }</span>

        <span class="cov0" title="0">return navbarClasses + navbarInactiveClasses</span>
}

func loggedIn(current, title string, flashes []Flash) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;nav class=\"flex h-12 min-h-[3rem] w-full border-b border-b-gray-600\"&gt;&lt;div class=\"m-auto flex w-full max-w-4xl items-center gap-4 px-4 py-1\"&gt;&lt;div class=\"flex flex-1 justify-start gap-2 text-gray-500\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var3 = []any{getNavbarClasses(current, "/")}
                        templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var3...)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "&lt;a class=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var4 string
                        templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var3).String())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/logged_in.templ`, Line: 1, Col: 0}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\" href=\"/\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = homeIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "&lt;span class=\"max-sm:hidden\"&gt;LDAP Manager&lt;/span&gt;&lt;/a&gt; ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var5 = []any{getNavbarClasses(current, "/users")}
                        templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var5...)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "&lt;a class=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var6 string
                        templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var5).String())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/logged_in.templ`, Line: 1, Col: 0}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "\" href=\"/users\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = usersIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "&lt;span class=\"max-sm:hidden\"&gt;Users&lt;/span&gt;&lt;/a&gt; ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var7 = []any{getNavbarClasses(current, "/groups")}
                        templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var7...)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "&lt;a class=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var8 string
                        templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var7).String())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/logged_in.templ`, Line: 1, Col: 0}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "\" href=\"/groups\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = groupIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "&lt;span class=\"max-sm:hidden\"&gt;Groups&lt;/span&gt;&lt;/a&gt; ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var9 = []any{getNavbarClasses(current, "/computers")}
                        templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var9...)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "&lt;a class=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var10 string
                        templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var9).String())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/logged_in.templ`, Line: 1, Col: 0}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "\" href=\"/computers\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = laptopIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "&lt;span class=\"max-sm:hidden\"&gt;Computers&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;a href=\"/logout\" class=\"flex items-center rounded-md border border-gray-600 p-2 outline-none transition-colors hocus:border-white hocus:bg-white hocus:text-black\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = logoutIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "&lt;/a&gt;&lt;/div&gt;&lt;/nav&gt;&lt;div class=\"mx-auto w-full max-w-4xl flex-1 p-4\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if len(flashes) &gt; 0 </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "&lt;div class=\"mb-4\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">for _, flash := range flashes </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "&lt;div class=\"{{ .BorderColor }} rounded-md border p-4 py-3\"&gt;")
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ_7745c5c3_Err
                                        }</span>
                                        <span class="cov0" title="0">var templ_7745c5c3_Var11 string
                                        templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(flash.Message)
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/logged_in.templ`, Line: 49, Col: 80}
                                        }</span>
                                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ_7745c5c3_Err
                                        }</span>
                                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "&lt;/div&gt;")
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ_7745c5c3_Err
                                        }</span>
                                }
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "&lt;/div&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templ_7745c5c3_Var1.Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = base(title).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file21" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"
)

func Login(flashes []Flash, version string) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;form class=\"w-fit m-auto space-y-4 rounded-md border border-gray-600 p-8\" action=\"/login\" method=\"post\"&gt;&lt;img src=\"/static/logo.webp\" class=\"w-full max-w-[256px]\"&gt; ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if len(flashes) &gt; 0 </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "&lt;div class=\"mb-4\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">for _, flash := range flashes </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "&lt;div class=\"{ flash.BorderColor } rounded-md border p-4 py-3\"&gt;")
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ_7745c5c3_Err
                                        }</span>
                                        <span class="cov0" title="0">var templ_7745c5c3_Var3 string
                                        templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(flash.Message)
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/login.templ`, Line: 10, Col: 83}
                                        }</span>
                                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ_7745c5c3_Err
                                        }</span>
                                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "&lt;/div&gt;")
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ_7745c5c3_Err
                                        }</span>
                                }
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "&lt;/div&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "&lt;div&gt;&lt;input type=\"text\" name=\"username\" placeholder=\"Username\" class=\"form-input w-full rounded-md border border-gray-600 bg-black px-2 py-1 outline-none transition-colors placeholder:select-none focus:border-white hocus:ring-0\"&gt;&lt;/div&gt;&lt;div&gt;&lt;input type=\"password\" name=\"password\" placeholder=\"Password\" class=\"form-input w-full rounded-md border border-gray-600 bg-black px-2 py-1 outline-none transition-colors placeholder:select-none focus:border-white hocus:ring-0\"&gt;&lt;/div&gt;&lt;button type=\"submit\" class=\"w-full rounded-md border border-white bg-white px-3 py-1 font-bold text-black outline-none transition-colors hocus:bg-opacity-0 hocus:text-white disabled:hocus:bg-opacity-10\"&gt;Login&lt;/button&gt;&lt;div class=\"text-center text-xs text-gray-500\"&gt;&lt;p&gt;Powered by &lt;a href=\"https://github.com/netresearch/ldap-manager\" class=\"break-keep outline-none transition-colors hocus:text-white hocus:underline hocus:decoration-white\"&gt;netresearch/ldap-manager&lt;/a&gt;&lt;/p&gt;&lt;p&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var4 string
                        templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(version)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/login.templ`, Line: 46, Col: 16}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "&lt;/p&gt;&lt;/div&gt;&lt;/form&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = base("Login").Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file22" style="display: none">// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.898
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import (
        "github.com/a-h/templ"
        templruntime "github.com/a-h/templ/runtime"

        "github.com/netresearch/ldap-manager/internal/ldap_cache"

        "fmt"

        ldap "github.com/netresearch/simple-ldap-go"
)

type user struct {
        ldap.User
}

func (c user) ID() string <span class="cov0" title="0">{
        return c.DN()
}</span>
func (c user) Name() string <span class="cov0" title="0">{
        return c.CN()
}</span>
func (c user) URL() templ.SafeURL <span class="cov0" title="0">{
        return userUrl(c.User)
}</span>
func (c user) Enabled() bool <span class="cov0" title="0">{
        return c.User.Enabled
}</span>

func specializeUsers(users []ldap.User) []Displayer <span class="cov0" title="0">{
        return mapSlice(users, func(c ldap.User) Displayer </span><span class="cov0" title="0">{
                return user{c}
        }</span>)
}

func User(user *ldap_cache.FullLDAPUser, unassignedGroups []ldap.Group, flashes []Flash) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var1 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var1 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var1 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "&lt;h1 class=\"text-3xl\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var3 string
                        templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(user.CN())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 32, Col: 34}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, " (")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var4 string
                        templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(user.SAMAccountName)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 32, Col: 59}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, ")&lt;/h1&gt;&lt;p class=\"text-sm text-gray-500\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var5 string
                        templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(user.DN())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 34, Col: 14}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, " ")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if !user.Enabled </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = lockIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "&lt;/p&gt;&lt;h2 class=\"mt-4 text-xl\"&gt;Groups:&lt;/h2&gt;&lt;div class=\"flex flex-col justify-between divide-y divide-gray-600\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">for _, group := range user.Groups </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "&lt;div class=\"flex items-center transition-colors list-outer-hocus:bg-gray-700/50\"&gt;&lt;a href=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var6 templ.SafeURL
                                templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinURLErrs(groupUrl(group))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 44, Col: 28}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "\" class=\"flex w-full items-center gap-2 py-2 pl-3 transition-transform focus:outline-none hocus:translate-x-2 [&amp;&gt;svg]:text-gray-500 [&amp;&gt;svg]:hocus:text-white\"&gt;&lt;span title=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var7 string
                                templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(group.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 47, Col: 30}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var8 string
                                templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(group.CN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 47, Col: 45}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "&lt;/span&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = rightArrowIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "&lt;/a&gt;&lt;form action=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var9 templ.SafeURL
                                templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinURLErrs(userUrl(user.User))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 50, Col: 38}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "\" method=\"POST\" class=\"flex-end pr-3\"&gt;&lt;input type=\"hidden\" name=\"removegroup\" value=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var10 string
                                templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(group.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 51, Col: 64}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "\"&gt; &lt;button class=\"flex items-center rounded-md p-1 ring-white focus:ring-1 [&amp;&gt;svg]:text-gray-500 [&amp;&gt;svg]:hocus:text-white\" type=\"submit\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = xIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "&lt;/button&gt;&lt;/form&gt;&lt;/div&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if len(user.Groups) == 0 </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "&lt;p class=\"text-gray-500\"&gt;No groups&lt;/p&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, " &lt;h2 class=\"mt-4 text-xl\"&gt;Add to group&lt;/h2&gt;&lt;form action=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var11 templ.SafeURL
                        templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinURLErrs(userUrl(user.User))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 66, Col: 35}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "\" method=\"POST\"&gt;&lt;div class=\"flex items-center gap-2\"&gt;&lt;select class=\"form-select flex-1 rounded-md border border-gray-600 bg-black py-1 pl-3 pr-8 transition-colors focus:border-white focus:ring-0\" name=\"addgroup\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">for _, group := range unassignedGroups </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "&lt;option value=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var12 string
                                templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(group.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 73, Col: 32}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var13 string
                                templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(group.CN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 73, Col: 47}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, "&lt;/option&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "&lt;/select&gt; &lt;button type=\"submit\" class=\"flex items-center rounded-md border border-white bg-white p-2 text-black transition-colors focus:outline-none hocus:bg-black hocus:text-white\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = plusIcon().Render(ctx, templ_7745c5c3_Buffer)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, "&lt;/button&gt;&lt;/div&gt;&lt;/form&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn(string(userUrl(user.User)), user.CN(), flashes).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func Users(users []ldap.User, showDisabled bool, flashes []Flash) templ.Component <span class="cov0" title="0">{
        return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_CtxErr
                }</span>
                <span class="cov0" title="0">templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                }</span>
                        }()
                }
                <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                templ_7745c5c3_Var14 := templ.GetChildren(ctx)
                if templ_7745c5c3_Var14 == nil </span><span class="cov0" title="0">{
                        templ_7745c5c3_Var14 = templ.NopComponent
                }</span>
                <span class="cov0" title="0">ctx = templ.ClearChildren(ctx)
                templ_7745c5c3_Var15 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) </span><span class="cov0" title="0">{
                        templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
                        templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
                        if !templ_7745c5c3_IsBuffer </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err == nil </span><span class="cov0" title="0">{
                                                templ_7745c5c3_Err = templ_7745c5c3_BufErr
                                        }</span>
                                }()
                        }
                        <span class="cov0" title="0">ctx = templ.InitializeContext(ctx)
                        templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, "&lt;div class=\"flex justify-between gap-2\"&gt;&lt;h1 class=\"mb-4 text-3xl\"&gt;All users&lt;/h1&gt;&lt;div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var16 = []any{disabledUsersClass(showDisabled)}
                        templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var16...)
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 24, "&lt;a href=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var17 templ.SafeURL
                        templ_7745c5c3_Var17, templ_7745c5c3_Err = templ.JoinURLErrs(disabledUsersHref(showDisabled))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 93, Col: 43}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var17))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 25, "\" class=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var18 string
                        templ_7745c5c3_Var18, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var16).String())
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 1, Col: 0}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var18))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 26, "\" title=\"")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">var templ_7745c5c3_Var19 string
                        templ_7745c5c3_Var19, templ_7745c5c3_Err = templ.JoinStringErrs(disabledUsersTooltip(showDisabled))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 95, Col: 47}
                        }</span>
                        <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var19))
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 27, "\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">if showDisabled </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = lockOpenIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        } else<span class="cov0" title="0"> {
                                templ_7745c5c3_Err = lockIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 28, "&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=\"flex flex-col justify-between divide-y divide-gray-600\"&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">for _, user := range users </span><span class="cov0" title="0">{
                                templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 29, "&lt;div class=\"flex items-center transition-colors list-outer-hocus:bg-gray-700/50\"&gt;&lt;a href=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var20 templ.SafeURL
                                templ_7745c5c3_Var20, templ_7745c5c3_Err = templ.JoinURLErrs(userUrl(user))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 109, Col: 26}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var20))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 30, "\" class=\"flex w-full items-center gap-2 py-2 pl-3 transition-transform focus:outline-none hocus:translate-x-2 [&amp;&gt;.goto]:text-gray-500 [&amp;&gt;.goto]:hocus:text-white\"&gt;&lt;span title=\"")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var21 string
                                templ_7745c5c3_Var21, templ_7745c5c3_Err = templ.JoinStringErrs(user.DN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 112, Col: 29}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var21))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 31, "\"&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var22 string
                                templ_7745c5c3_Var22, templ_7745c5c3_Err = templ.JoinStringErrs(user.CN())
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 112, Col: 43}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var22))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 32, " (")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">var templ_7745c5c3_Var23 string
                                templ_7745c5c3_Var23, templ_7745c5c3_Err = templ.JoinStringErrs(user.SAMAccountName)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/users.templ`, Line: 112, Col: 68}
                                }</span>
                                <span class="cov0" title="0">_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var23))
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 33, ")&lt;/span&gt; ")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">if !user.Enabled </span><span class="cov0" title="0">{
                                        templ_7745c5c3_Err = lockIcon("text-gray-500").Render(ctx, templ_7745c5c3_Buffer)
                                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                                return templ_7745c5c3_Err
                                        }</span>
                                }
                                <span class="cov0" title="0">templ_7745c5c3_Err = rightArrowIcon().Render(ctx, templ_7745c5c3_Buffer)
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                                <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 34, "&lt;/a&gt;&lt;/div&gt;")
                                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                        return templ_7745c5c3_Err
                                }</span>
                        }
                        <span class="cov0" title="0">templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 35, "&lt;/div&gt;")
                        if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                                return templ_7745c5c3_Err
                        }</span>
                        <span class="cov0" title="0">return nil</span>
                })
                <span class="cov0" title="0">templ_7745c5c3_Err = loggedIn(fmt.Sprintf("/users"), "Users", flashes).Render(templ.WithChildren(ctx, templ_7745c5c3_Var15), templ_7745c5c3_Buffer)
                if templ_7745c5c3_Err != nil </span><span class="cov0" title="0">{
                        return templ_7745c5c3_Err
                }</span>
                <span class="cov0" title="0">return nil</span>
        })
}

func userUrl(user ldap.User) templ.SafeURL <span class="cov0" title="0">{
        return templ.SafeURL("/users/" + user.DN())
}</span>

func disabledUsersHref(showDisabled bool) templ.SafeURL <span class="cov0" title="0">{
        if showDisabled </span><span class="cov0" title="0">{
                return "/users?show-disabled=0"
        }</span>

        <span class="cov0" title="0">return "/users?show-disabled=1"</span>
}

func disabledUsersTooltip(showDisabled bool) string <span class="cov0" title="0">{
        if showDisabled </span><span class="cov0" title="0">{
                return "Hide disabled users"
        }</span>

        <span class="cov0" title="0">return "Show disabled users"</span>
}

const disabledUsersBaseClasses = "flex items-center rounded-md border px-2 py-2 transition-colors"
const disabledUsersEnabledClasses = "border-white text-black bg-white hocus:bg-black hocus:text-white hocus:border-gray-600"
const disabledUsersDisabledClasses = "border-gray-600 hocus:bg-white hocus:text-black hocus:border-white"

func disabledUsersClass(showDisabled bool) string <span class="cov0" title="0">{
        if showDisabled </span><span class="cov0" title="0">{
                return disabledUsersBaseClasses + " " + disabledUsersEnabledClasses
        }</span>

        <span class="cov0" title="0">return disabledUsersBaseClasses + " " + disabledUsersDisabledClasses</span>
}

var _ = templruntime.GeneratedTemplate
</pre>
		
		<pre class="file" id="file23" style="display: none">package web

import (
        "net/url"
        "sort"

        "github.com/gofiber/fiber/v2"
        ldap "github.com/netresearch/simple-ldap-go"

        "github.com/netresearch/ldap-manager/internal/ldap_cache"
        "github.com/netresearch/ldap-manager/internal/web/templates"
)

func (a *App) usersHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        showDisabled := c.Query("show-disabled", "0") == "1"
        users := a.ldapCache.FindUsers(showDisabled)
        sort.SliceStable(users, func(i, j int) bool </span><span class="cov0" title="0">{
                return users[i].CN() &lt; users[j].CN()
        }</span>)

        <span class="cov0" title="0">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.Users(users, showDisabled, templates.Flashes()).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

func (a *App) userHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        userDN, err := url.PathUnescape(c.Params("userDN"))
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">thinUser, err := a.ldapCache.FindUserByDN(userDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">user := a.ldapCache.PopulateGroupsForUser(thinUser)
        sort.SliceStable(user.Groups, func(i, j int) bool </span><span class="cov0" title="0">{
                return user.Groups[i].CN() &lt; user.Groups[j].CN()
        }</span>)
        <span class="cov0" title="0">unassignedGroups := a.findUnassignedGroups(user)
        sort.SliceStable(unassignedGroups, func(i, j int) bool </span><span class="cov0" title="0">{
                return unassignedGroups[i].CN() &lt; unassignedGroups[j].CN()
        }</span>)

        <span class="cov0" title="0">c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)

        return templates.User(user, unassignedGroups, templates.Flashes()).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

type userModifyForm struct {
        AddGroup        *string `form:"addgroup"`
        RemoveGroup     *string `form:"removegroup"`
        PasswordConfirm string  `form:"password_confirm"`
}

func (a *App) userModifyHandler(c *fiber.Ctx) error <span class="cov0" title="0">{
        // Authentication handled by middleware, no need to check session
        userDN, err := url.PathUnescape(c.Params("userDN"))
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">form := userModifyForm{}
        if err := c.BodyParser(&amp;form); err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">if form.RemoveGroup == nil &amp;&amp; form.AddGroup == nil </span><span class="cov0" title="0">{
                return c.Redirect("/users/" + userDN)
        }</span>

        // Require password confirmation for sensitive operations
        <span class="cov0" title="0">if form.PasswordConfirm == "" </span><span class="cov0" title="0">{
                return a.renderUserWithError(c, userDN, "Password confirmation required for modifications")
        }</span>

        <span class="cov0" title="0">executorDN, err := RequireUserDN(c)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">l, err := a.authenticateLDAPClient(executorDN, form.PasswordConfirm)
        if err != nil </span><span class="cov0" title="0">{
                return a.renderUserWithError(c, userDN, "Invalid password")
        }</span>

        // Perform the user modification
        <span class="cov0" title="0">if err := a.performUserModification(l, &amp;form, userDN); err != nil </span><span class="cov0" title="0">{
                return a.renderUserWithError(c, userDN, "Failed to modify: "+err.Error())
        }</span>

        // Render success response
        <span class="cov0" title="0">return a.renderUserWithSuccess(c, userDN, "Successfully modified user")</span>
}

func (a *App) findUnassignedGroups(user *ldap_cache.FullLDAPUser) []ldap.Group <span class="cov8" title="1">{
        return a.ldapCache.Groups.Filter(func(g ldap.Group) bool </span><span class="cov8" title="1">{
                for _, ug := range user.Groups </span><span class="cov0" title="0">{
                        if ug.DN() == g.DN() </span><span class="cov0" title="0">{
                                return false
                        }</span>
                }

                <span class="cov8" title="1">return true</span>
        })
}

// loadUserData loads and prepares user data with proper sorting
func (a *App) loadUserData(userDN string) (*ldap_cache.FullLDAPUser, []ldap.Group, error) <span class="cov0" title="0">{
        thinUser, err := a.ldapCache.FindUserByDN(userDN)
        if err != nil </span><span class="cov0" title="0">{
                return nil, nil, err
        }</span>

        <span class="cov0" title="0">user := a.ldapCache.PopulateGroupsForUser(thinUser)
        sort.SliceStable(user.Groups, func(i, j int) bool </span><span class="cov0" title="0">{
                return user.Groups[i].CN() &lt; user.Groups[j].CN()
        }</span>)
        <span class="cov0" title="0">unassignedGroups := a.findUnassignedGroups(user)
        sort.SliceStable(unassignedGroups, func(i, j int) bool </span><span class="cov0" title="0">{
                return unassignedGroups[i].CN() &lt; unassignedGroups[j].CN()
        }</span>)

        <span class="cov0" title="0">return user, unassignedGroups, nil</span>
}

// renderUserWithError renders the user page with an error message
func (a *App) renderUserWithError(c *fiber.Ctx, userDN, errorMsg string) error <span class="cov0" title="0">{
        c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)
        user, unassignedGroups, err := a.loadUserData(userDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">return templates.User(
                user, unassignedGroups,
                templates.Flashes(templates.ErrorFlash(errorMsg)),
        ).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

// renderUserWithSuccess renders the user page with a success message
func (a *App) renderUserWithSuccess(c *fiber.Ctx, userDN, successMsg string) error <span class="cov0" title="0">{
        c.Set(fiber.HeaderContentType, fiber.MIMETextHTMLCharsetUTF8)
        user, unassignedGroups, err := a.loadUserData(userDN)
        if err != nil </span><span class="cov0" title="0">{
                return handle500(c, err)
        }</span>

        <span class="cov0" title="0">return templates.User(
                user, unassignedGroups,
                templates.Flashes(templates.SuccessFlash(successMsg)),
        ).Render(c.UserContext(), c.Response().BodyWriter())</span>
}

// performUserModification handles the actual LDAP user modification operation
func (a *App) performUserModification(l *ldap.LDAP, form *userModifyForm, userDN string) error <span class="cov0" title="0">{
        if form.AddGroup != nil </span><span class="cov0" title="0">{
                if err := l.AddUserToGroup(userDN, *form.AddGroup); err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">a.ldapCache.OnAddUserToGroup(userDN, *form.AddGroup)</span>
        } else<span class="cov0" title="0"> if form.RemoveGroup != nil </span><span class="cov0" title="0">{
                if err := l.RemoveUserFromGroup(userDN, *form.RemoveGroup); err != nil </span><span class="cov0" title="0">{
                        return err
                }</span>
                <span class="cov0" title="0">a.ldapCache.OnRemoveUserFromGroup(userDN, *form.RemoveGroup)</span>
        }

        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file24" style="display: none">// Package main provides the entry point for the LDAP Manager web application.
// It initializes logging, parses configuration options, and starts the web server.
package main

import (
        "os"

        "github.com/rs/zerolog"
        "github.com/rs/zerolog/log"

        "github.com/netresearch/ldap-manager/internal"
        "github.com/netresearch/ldap-manager/internal/options"
        "github.com/netresearch/ldap-manager/internal/web"
)

func main() <span class="cov0" title="0">{
        log.Logger = log.Output(zerolog.ConsoleWriter{Out: os.Stderr})

        log.Info().Msgf("LDAP Manager %s starting...", internal.FormatVersion())

        opts := options.Parse()
        log.Logger = log.Logger.Level(opts.LogLevel)

        app, err := web.NewApp(opts)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatal().Err(err).Msg("could not initialize web app")
        }</span>

        <span class="cov0" title="0">if err := app.Listen(":3000"); err != nil </span><span class="cov0" title="0">{
                log.Fatal().Err(err).Msg("could not start web server")
        }</span>
}
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
